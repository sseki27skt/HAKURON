
# XMLを用いた雅楽譜の翻刻 {#sec-05}

本章では西洋音楽における音楽情報記述モデルを参照しつつ，本論文が提示するGagakuXMLの構築に向けて，雅楽情報の記述に必要な情報記述モデルについて検討を行い，本論文の提唱するGagakuXMLの最小構成である半構造化譜字ユニットとメタデータ記述領域の具体的な記述構造について検討を行う．

## 本論文が示す雅楽情報記述モデルの射程

### 雅楽情報記述モデルの位置付け


モデル全体の構造について検討する前に，本論文が提示する雅楽情報記述モデルのコンセプトについてその射程を確認しておく必要がある．本章後半で示すXMLを用いた具体的なデータ構造化においては楽譜記述をその記録対象としているが，本論文が示す雅楽情報記述モデルそのものは楽譜に書かれた要素のみならず，雅楽に関わるより包括的な情報の記述を想定している．西洋音楽を対象とした情報記述モデルがそうであったように，音楽情報は様々なメディアによって媒介されており，その記述内容も多岐にわたる．本章前半で議論する雅楽情報記述モデルも，そのような多様な音楽情報を楽譜という記号体系を1つの軸として接続し，雅楽に関連した多様な知的情報を記述するための新しい方法論の確立に向けたモデルとして位置づけられる．

### MEI及びTEIとの関係性

人文学資料を対象とした情報記述モデルとしては，既にTEIやMEIのコミュニティでも多数の議論が行われており，その成果物としてXMLを用いた構造化ガイドラインが示されている．一方，それがそのまま雅楽譜とそれに関連した音楽資料の記述に適用できるかというと，必ずしもそうではない．MEIは西洋音楽資料，TEIはテキスト資料主な対象としており，モデル自体も記述の対象としている資料が持つ構造を反映したものとなっている．したがって，雅楽譜を対象とした情報記述モデルを構築する上では，それらのモデルを参考にしつつも，雅楽譜の持つ特性を考慮した新たなモデルを構築する必要がある．

一方，記述の対象となる資料が持つ構造とは切り離されたメタな議論については，雅楽情報記述モデルにも十分応用できる部分が存在する．例えば，詳細は後述するが，本論文が示すGagakuXMLのメタデータ記述領域ではMEIにおけるメタデータ記述モデルを反映したスキーマを一部で採用している．これは，MEIのスキーマがモジュール化されているためであり，必要に応じて外部からそのスキーマを参照することで，その一部を別のスキーマに取り込むことができる．また，資料内部の関係性の記述やXMLが苦手とするネットワーク的な構造の記述方法についても，MEIやTEIのコミュニティで数多くの議論が重ねられてきており，将来的にGagakuXMLを拡張させるうえで，これらの先行事例は強力な後押しになるだろう．また，既に指摘している通り，雅楽資料には五線譜で書かれた資料も存在しており，それらについてはMEIによる成果をそのまま使用できる可能性もある．

このように，MEIやTEIは本論文にとって関わりの深い先行研究ではあるが，具体的な記述の対象が持つ構造は大きく異なっている．したがって，いずれかが他方のモデルを包含するような関係にあるわけではなく，それぞれのモデルは一部で重なりながらも独立したものとして位置づけられる必要がある．

### 日本音楽が用いる楽譜のデジタル化に向けた既存のアプローチ

第 [-@sec-MachineReadableSheetMusic] 章では，西洋音楽における楽譜のデジタル化に向けた取り組みについて見てきたが，日本音楽関連資料を取り巻く環境の一部でも同様にデジタル化に向けた取り組みが存在している．

日本音楽が用いる楽譜の機械可読化については，坪井[-@坪井1992]による尺八を対象とした楽譜制作支援システムに端を発し，楽譜の入力編集システム[@岩澤1993]，手書き楽譜入力システム[@長沢1994]，尺八譜のための標準形式[@松島1998]，尺八譜情報の統合処理システム[@野口2001,野口2002]などが提案されてきた．しかし，開発されたシステムは現在公開されておらず，そこで用いられたデータについてもアクセスできない状態になっている．一方で，2010年代に入ると西洋音楽におけるデジタル化の動向が日本音楽研究においても一部で影響を与えていたと考えられ，出口[-@出口2013]はMEIを拡張することで地歌及び箏曲の譜をデジタル翻刻することを提案している．

また，箏，尺八，三味線などに代表される近世邦楽が用いる楽譜の作成システムとしては，MusicXMLから生田流の箏譜と三絃譜を出力するKotoViewer，MusicXMLから都山流と琴古流の尺八譜を出力するShakuViewerなどが挙げられる[^0011]．このような邦楽で用いられる楽譜制作ソフトウェアはあくまでも最終的には紙に印刷し，人間が読んで使用することが前提となっており，印刷楽譜の作成に特化したシステムになっている．また，先にも指摘しているとおり，MusicXMLは五線譜を制作するためのソフトウェア間でデータを共有するためのファイルフォーマットであり，内部の記述は西洋音楽の音楽理論に基づいている．つまり，MusicXMLの記述から日本伝統音楽で用いられる楽譜を得る場合，MusicXMLの記述をどのように出力するかという点については完全にソフトウェア側に依存しており，楽譜出力の元となるMusicXMLのデータには出力される楽譜に現れる譜字や楽譜のレイアウトに関する情報は一切含まれていない．これらのソフトウェアは人間が読む楽譜を作るという水準においてはユーザーの目的を満たしうる一方で，邦楽譜に含まれる音楽情報を機械可読に翻刻するという目的で使用することはできない．

このように，地歌及び箏曲を事例とした出口[-@出口2013]の取り組みを除けば，日本音楽を対象とした音楽情報の機械可読化についてはほぼ未着手のままとどめ置かれてしまっている状況にある．このような記譜法の多様性を反映した楽譜記述方法の不在はMIRが扱う音楽分野が偏っている原因の1つだろう．

[^0011]:いずれもRazvan Beuran氏によって開発されたフリーソフトウェアであり，以下のURLからダウンロードできる．

    - KotoViewer: [https://sites.google.com/site/razvanswebsite/software/kotoviewer?authuser=0](https://sites.google.com/site/razvanswebsite/software/kotoviewer)
    - hakuViewer: [https://sites.google.com/site/razvanswebsite/software/shakuviewer](https://sites.google.com/site/razvanswebsite/software/shakuviewer)

## 雅楽譜の機械可読化に向けた音楽情報記述モデル

### 雅楽情報記述モデルの構造

ここからは，本研究が取り組むデジタル雅楽譜の構築に向けて，雅楽譜の翻刻，さらには雅楽情報の統合的に向けて必要な情報記述のモデルについて検討する．全体的な構造はSMDLやMEIと同様に，全体の情報空間を4つの領域に分割して整理する方式を採用するが，具体的な方法や各領域の定義は雅楽の特性に合わせて再構築していく．


  - 譜字領域
    - 1つのデジタル雅楽譜を構成するうえで基準となる既存の楽譜が持つ譜字に関する情報．既存の雅楽譜資料に基づいて記述された1つ以上の半構造化譜字ユニットが含まれる．

  - ファクシミリ領域
    - 現物資料として存在する楽譜の版面が持つ視覚的な情報のうち，譜字領域の記述によって記述されていない非文字情報．

  - 時系列メディア領域
    - 音声，映像など，任意の数の時系列情報を持ったデータに関する情報．

  - 分析領域
    - 楽曲に関連する分析，解説，研究，評価などの情報．譜字領域，ファクシミリ領域，時系列メディア領域に含まれる情報を参照しつつ，デジタル雅楽譜上において新しく構築される分析的記述のほかにも，デジタル雅楽譜の外部に存在する情報との関連性を記述することで，資料のネットワーク構築を支援する．

#### 譜字領域 {.unnumbered}

譜字領域はデジタル雅楽譜を構成するうえで1つの基準となる既存の楽譜資料に基づいて作成された1つ以上の半構造化譜字ユニットを含む．SMDLにおける論理領域は楽譜と演奏の両方に共通する楽曲の抽象的な構造であり，作曲家の意図を反映していることが重視されていた．これは，作品の存在がその作者と強く関連づけられ，作品そのものが自律的であるという西洋音楽における作品概念に大きく支えられている．一方，雅楽は楽曲の作曲者が明らかでない場合も多く，作曲家の意図を反映した楽曲の姿に対する追求は雅楽文化の内部で実践されてこなかった．口伝を第一の伝承方法として採用してきた雅楽の文化においては，作曲家の意図ではなく伝承者の存在そのものが楽曲の存在を支えているといえるだろう．しかし，この研究が提唱するデジタル雅楽譜が目的とするのは，人間が媒介する音楽的知識や文化現象によって支えられる雅楽の本質的な楽曲概念を抽象的な次元で記述することではなく，既存の雅楽関連資料を機械可読な形式で表現することにある．したがって，本研究はあくまでも具体的な記録として残された資料の記述に立脚した雅楽情報の構造化を軸としたモデルを提唱する．

翻刻者は翻刻の目的を踏まえ，デジタル雅楽譜における便宜的な基準を提供する譜字領域の記述として適切な資料を選択する．また，翻刻者は全体の目的に照らしてあらゆる楽譜を譜字領域の内容として選択することができる．可能であるならばデジタルアーカイブ等の手段によって現物資料に対するアクセシビリティが確保されていることが望ましい．また，典拠とした楽譜自体のメタデータや選定の理由，構造化の方針についても，デジタル雅楽譜の内部でデータの利用者に対して示すべきである．ただし，新作など，典拠となる既存の楽譜資料が存在しない場合はこの限りではない．その場合，翻刻者は必要に応じて論理領域の記述を可視化するための手段を利用者に提供することが望ましい．

#### 譜字領域における音楽構造と視覚情報の統合的扱い {.unnumbered}

五線譜に関する情報の記述は楽譜から読み取られた楽曲構造の記述をベースとしており，その視覚的構成は切り離されざるを得ないことは先に指摘した通りである．SMDLがその論理領域と視覚領域の分離を明確にしていたのも，楽譜記述を音楽構造の記述として実践してきた経緯によるものである．
一方，雅楽を含む日本伝統音楽が用いる譜や東アジア圏で伝統的に用いられてきた記譜体系の多くは文字を使用した記述体系になっており，楽譜である以前に楽譜の記述をテキスト情報として直接コンピュータで扱うことができる．もちろん，それらが言語的な意味を持っているとは限らないが，五線譜をプレーンテキストで表現する @fig-no29 のような方法に比べると，雅楽譜をテキストデータとして扱うことは圧倒的に容易であり，かつ五線譜において必要な翻訳/再翻訳のプロセスを経る必要がないという点は大きなメリットである．また，五線譜とは大きく異なる方法で可視化された音楽構造を読むのと比べると，文字起こしされた雅楽譜を読む経験は元の雅楽譜を読む経験により近く，その使用に際して人間側に求められるコストが比較的少ないというメリットもある．つまり，本研究が示す雅楽情報記述の四領域モデルにおける譜字領域の内容は，西洋音楽情報記述モデルにおける論理領域と視覚領域の積によって定義される領域がその中心となると言ってよいだろう．この2つの領域を重複させた表現は楽譜が文字で書かれるという雅楽譜の特性によってもたらされたものである．

#### 譜字領域によって生じる資料の中心性 {.unnumbered}

翻刻の目的上，譜字領域の記述との差分を示すことによって表現されうる複数の半構造化譜字ユニットを含む必要がある場合には，それぞれの楽譜資料からの距離が最も短いものを便宜的な基準(親ユニット)として1つ選択してその全体構造を記述し，その他の楽譜(子ユニット)についてはそれとの差分によって記述することで譜字領域全体の冗長的な記述を避けることができる．ただし，翻刻の目的に照らしてその中心となる資料が明確である場合には，冗長性の回避よりも翻刻における意味的な中心性を優先する可能性を検討する必要がある．一方，半構造化譜字ユニットに記述された雅楽譜はデジタル雅楽譜内の記述において1つの基準となる参照点を提供するが，それゆえに選択された楽譜に何らかの権威性や正当性が認められるわけではない．また，SMDLにおける論理領域はその他3つの領域の全てから参照されることで，音楽情報の統合における核となる領域として定義されていたが，本研究が提唱する四領域モデルにおいては，譜字領域だけが情報記述の軸となるわけでなく，その他の3領域が直接的に参照--被参照の関係性を構成することも想定している．
これは，原典版のような権威化された楽譜資料によってもたらされる強い中心性を持たない雅楽の文化的構造をふまえ，相対化された複数の資料がお互いに相補的な関係性を構成することで生じる情報構造のあり方を反映している．また，情報記述の構造的な性質が特定の楽譜や資料に与えた役割によって，その資料に本来存在していなかったはずの権威性や中心性が生じることを避けるためにも，譜字領域の記述はあくまでもデジタル雅楽譜の構築における便宜的な基準としてのみ機能するものとして位置づける必要がある．

もっとも，人間をメディアとする口頭伝承によって伝承されてきた音楽文化である雅楽をSMDLが想定していたような抽象的な楽曲概念を軸として記述しようとした場合，論理領域として記述される楽曲の骨子となる要素をどこに求めうるのかを問う必要がある．音楽を本質的に自立的な存在として捉え，楽譜の普遍性に対する信頼が非常に高い次元で醸成され，印刷技術によって複製された楽譜が広く流通した西洋音楽においては，楽譜の記述を軸としつつ，作曲家の意図を楽譜記述の内外で追求する実践が積み重ねられてきた．原典版の編纂は楽譜というメディアを舞台に，作曲家が抱いていた本来の意図を再構築する営みだといえるが，それが楽譜を舞台に展開されたのは西洋音楽における五線譜の存在が作品の客観的な記録であるかのような幻想を生み出すほどの信頼を確立していたからに他ならない．また，原典版の編纂は楽譜の信頼を基盤に展開されたと同時に，その信頼をさらに強化し，西洋音楽における五線譜の存在を楽譜文化における，ある種の例外的な存在へと昇華させた．このような，作品概念とその作者性が強固に結びつけられ，楽譜というメディアによってそれを強化してきた西洋クラシック音楽における文化的環境を前提に確立されてきたSMDLの四領域モデルは，作者性や楽譜と作品の関係性が希薄な音楽文化環境において音楽情報の記述モデルとして必ずしも十分とは言い難い．

また，SMDLが提供する四領域モデルにおける論理領域は非常に抽象的な記述を可能にしているが，雅楽文化の性質からするとその抽象性は過剰であり，雅楽が形成してきた文化としての実態に即しているとは言い難い．雅楽譜に作曲者の名前が記載されていないことからも推察されるように，雅楽における作品と作者の関係性は西洋音楽に比べて曖昧なままとどめ置かれている．さらに，楽曲の明確な作者が明らかでないことも多い．長い歴史の中で伝承されてきた雅楽曲は，既に特定の作曲家との関係性を離れ，雅楽文化全体の総有財産として維持されている．ある楽曲が特定の作者と強く結びついた西洋音楽的な構造はそこに存在せず，作者の意図が正しく反映された楽譜を作るという取り組みも存在しない．明治撰定譜の編纂は雅楽における1つのスタンダードを構築する事業であったとも位置付けられうるが，その実態は西洋音楽における原典版の編纂とは異なり，三方楽所から集められた楽師が共通して演奏できる楽曲の楽譜を整備することが目的であり，実質的な内容は三方楽所が従来使用してきた楽譜を統合したものとなっている．作品が自律的であるという認識や作品に対する作者性が相対的に希薄であり，作品の真正性や楽譜の厳密な正しさに対する議論が必要とされてこなかった雅楽の文化において，その本質的な真正性や正しさはまさに口伝という習慣の中に織り込まれ，世代を超えて脈々と受け継がれてきた稽古の実践によって担保されてきた．ある意味，雅楽においては口伝を経てその文化を習得した``人''という圧倒的な情報量を持つメディアの存在そのものによって担保される伝承の安定性やそれに対する絶対的な信頼といった，演奏や伝承の実践という水準における具体的な行為の積み重ねによってその他律的な実在を安定させている．

このような，人間を介さない形で人の存在に大きく依存した文化を記録していくためには，一定の合理的妥協を受け入れる必要がある．1つの可能性としては現在の文化財保護行政の指定に従い，重要無形文化財の保持者である宮内庁書陵部楽部における伝承を``正当な伝承''とみなし，それを雅楽文化における一種の原典と位置付けることが考えられるだろう．このように定義するのであれば，宮内庁楽部で実践されている演奏やそこで使用されている明治撰定譜を軸としつつ，論理領域の記述を構築することが可能になる．ただし，このような方針を採用した場合においても，外部から参照可能な宮内庁楽部における雅楽実践やそこで用いられる楽譜は，人によって媒介される無形の文化が具体的な形態をとって現れた表象の一部に過ぎず，それはあくまでも個別の資料に立脚した情報である．したがって，それらを雅楽一般において普遍的な規範であるかのように認識させるような記述構造は避けなければならない．

また，明治以降に現在の形式が整備された宮内庁楽部における伝承に基づいて構築された論理領域は明治以降の音楽文化に関する結節点としては機能しうる一方で，明治以前に構築されている膨大な雅楽関連資料の結節点として十分な機能を果たすことは期待できないだろう．遠楽や廃絶曲の譜は明治撰定譜には含まれない記譜様式を含んでいるものがあり，その演奏形態も大きく変化していることが指摘されている．ある時代に固有の表現を基準として楽曲の構造を一意に定義してしまうと，長い歴史の中で大きく変化してきた楽曲を統合する上で様々な障害が発生しうる．したがって，必要に応じて1つ以上の資料に基づいた複数の半構造化譜字ユニットを含む譜字領域を構築する必要がある．
デジタル翻刻された楽譜を軸とする雅楽情報の接続を実現するうえでは楽曲の論理的な構造を抽象的に記述するというSMDLにおける論理領域の概念は意味をなさず，既存の具体的な資料の中から適切なものを選択し，それらを軸にして情報の繋がりを構築していく必要がある．

#### ファクシミリ領域 {.unnumbered}

``ファクシミリ''は「書物・絵画・原稿などの，複製．複写．模写．複製本．コピー．」[@デジタル大辞泉2024b]を指す言葉である．現在，雅楽譜には市販の印刷譜が存在するが，それ以前の楽譜は演奏者が手で書き写しおり，現在市販されている印刷譜も手書きの楽譜をコピーしている．したがって，何らかのオリジナルを写し取っているという点においては，現代の印刷楽譜もファクシミリと呼ぶことができる．また，デジタル画像として保存されている場合，そのデータそのものが現物資料として存在する複製物をオリジナルとする電子的な複製であるとも捉えられる．

ファクシミリ領域には雅楽譜が持つ視覚的要素の内，半構造化譜字ユニットとしては記述されない非文字情報が含まれる．
譜字領域の典拠となった楽譜が画像データとしてアクセス可能である場合，その画像データと譜字領域を関連付けることで，デジタル雅楽譜の典拠となった具体的な楽譜版面との関係性を明示することを検討すべきである．その対応関係は翻刻の目的に応じて，楽曲，ページ，行，譜字など複数の水準の中から適切な段階を選択して対応付ける必要がある．SMDLにおける視覚領域は論理領域の記述を``どのように可視化するか''という点が重視されていたが，デジタル雅楽譜の記述においては譜字領域の記述が何らかの典拠を持つことを前提としているため，重要なのは``どのように可視化するか''ということではなく，``どのように可視化されているか''ということを画像資料との関連によって示すことである．

ある譜字領域を軸として複数の雅楽譜版面上に生ずる資料間の差分を関連付ける場合など，翻刻者は必要に応じて半構造化譜字ユニットの典拠として採用されていない雅楽譜画像をファクシミリ領域に含むことができる．このように，1つの半構造化譜字ユニットに対して複数のファクシミリ領域の記述を対応付ける場合，翻刻者はファクシミリ領域に含む楽譜画像の情報と譜字領域の関係性について，利用者に誤解のないように特に注意して明示する必要がある．

また，必要に応じて版面の大きさ，マージン量，題字・譜字等の大きさなど，個々の楽譜が持つ視覚的な構成を記述する可能性は排除されないが，半構造化譜字ユニットの記述に基づいて楽譜版面を再構成することを目的とした，楽譜レンダリングに関する情報をデジタル雅楽譜の内部に記述するべきかは慎重に判断されるべきである．デジタル雅楽譜の目的はあくまでも雅楽情報の記述であり，デジタル雅楽譜組版ではない．もちろん，デジタル雅楽譜に記述された情報を用いた雅楽譜の組版が不可能とは限らないが，その機能は雅楽情報記述の外部で達成されるべきである．

#### 時系列メディア領域 {.unnumbered}

時系列メディア領域には映像，音声など，任意の数の時系列情報を持ったデータに関する情報が含まれる．SMDLは音響に関連する記述領域として人間の身振りに関する情報を含めることを想定し，演奏者によって追加される情報の記述に軸を置いている．しかし，雅楽の場合は楽譜に書かれた楽曲の構造に対して演奏者が何らかの情報を付与することによって楽曲を演奏として具現化させるわけではなく，常に楽譜の記述に先立って口伝による演奏の伝承が存在しており，その構造は現在進行形で取り組まれている伝承実践においても維持されている．もちろん，楽譜上では現れない具体的な楽器の操作，息継ぎ，間など，演奏に関する情報を記述することは可能だが，それらは楽譜記述を音響として具体化するために付与される情報としてではなく，具体的な演奏資料を補足する解釈や分析として記述されるべきである．

翻刻者はその目的に照らして適切な時系列メディアを選択することができる．必要に応じて譜字領域との関連性を示すために半構造化譜字ユニットと時系列メディアのアラインメント情報を提供することができる．ファクシミリ領域に記述される情報と同様に，楽曲から譜字までの間の適切な段階において時系列メディアの持つ時間情報とその他の情報との関係性が明示されうる．また，SMDLにおいてはすべての情報が論理領域を軸としてつなげることが想定されているが，雅楽譜の記述は五線譜の記述に比べてあいまいな部分が多く，演奏との間に明確な対応関係を見出させるとは限らない．西洋音楽の場合には音符を最小単位として楽譜と演奏のアラインメントを行うことができるかもしれないが，雅楽譜の譜字とその演奏とを厳密に紐づけることは極めて困難であろう．しかし，譜字の単位でアラインメントを取ることが難しくても，譜字よりも大きな単位，すなわち半帖，一の句，二の句といった楽曲構造に関する記述とのアラインメントは1つの可能性として検討する余地がある．また，実際の演奏は様式によって楽譜上には表れない繰り返しや遷移が行われることもあるため，楽曲構造に関する記述や譜字といった，楽曲よりも細かい単位で演奏との対応関係を記述する場合には，その演奏において楽譜の記述がどのように展開されているのかを記述する必要がある．

#### 分析領域 {.unnumbered}

分析領域にはデジタルが雅楽譜に含まれる翻刻された楽譜，楽譜画像，音声，映像などの情報に関する分析，解説，研究，評価，公演などの情報が含まれる．譜字領域，ファクシミリ領域，時系列メディア領域に含まれる情報を参照しつつ，デジタル雅楽譜上において新しく構築される分析的記述のほかにも，デジタル雅楽譜の外部に存在する情報との関連性を記述することで，資料のネットワーク構築を支援する．雅楽資料の場合には，五線譜による訳譜や奏法譜など，雅楽譜以外の記譜法で記述された楽譜資料との関連を記述する可能性が含まれる．この場合，五線譜を対象として整備されているMEIやMusicXMLなど，既存の五線譜用フォーマットを活用して翻刻された楽譜とデジタル雅楽譜との関連性を記述することで，異なる記譜法で記述された楽譜資料同士の関連性を明確に示すことを可能にする．

先にも指摘しているように，雅楽においては演奏と記譜の間に存在する情報ギャップが大きいため，分析領域の記述と既存の楽譜を典拠として構築された譜字領域の記述を関連付けることは時に困難である．したがって，分析領域における情報の接続は譜字領域を介さずに，時系列メディア領域--分析領域，ファクシミリ領域--分析領域といったように，演奏音源や楽譜画像といった現物資料に直接言及して行えることが望ましい．

### 雅楽情報の機械可読化における4つの水準

ここまで，西洋音楽において議論されてきたSMDLを適宜参照しつつ，雅楽における音楽情報を機械可読に翻刻するために必要なモデルについて述べてきた．しかし，上記に示した雅楽譜版の四領域モデルを常にフル活用して楽譜の翻刻が行われるわけではない．実際の雅楽譜翻刻においては，その目的や全体の作業コストに即した形でどの程度の情報密度を持ったデジタル雅楽譜を構築するかを検討する必要がある．翻刻の目的に照らして成果物であるデジタル雅楽譜の記述が不足している場合は言うまでもないが，逆に情報が過剰である場合も，その記述の適切なメンテナンスにかかるコストや利用に際して必要な処理の増加など，様々な問題を引き起こす可能性がある．したがって，デジタル雅楽譜の構築においては，その目的に応じて適切な方針を定める必要がある．それは，西洋音楽において展開されてきた原典版の編纂に際して，詳細な編集方針を設定することで作業全体のスキームを明確にし，編集者間での作業の一貫性を保つことが求められるのと同様であり，それは成果物の利用者に対してデータを安心して利用してもらうためにも欠かすことのできないことである．

以下に示すのは，雅楽情報の機械可読な記述を進める上で本論文が提案する4つの水準である．文字情報としての雅楽譜のデジタル翻刻という非構造化データの構築から始まり，後半に行くにつれて四領域モデルのより広い範囲にわたる情報を記述することを想定している．これらの水準は，デジタル雅楽譜の構築において，その目的に応じて適切な情報密度を持ったデータを構築するための方針を示すものではあるが，当然ながら，実際のデジタル雅楽譜がどのように構築され，どのような情報を持つべきかは，その目的や利用者の要求，デジタル雅楽譜の構築にかけられる予算や時間など，様々な要因によって変化しうる．したがって，デジタル雅楽譜の構築に当たっては，全体の方針を明確にし，必要に応じて適宜その方針自体を修正しながら全体の翻刻をマネジメントする必要がある．


  - 非構造化テキスト資料としての翻刻
    - 雅楽譜を文字資料としてみなし，その内容を文字起こしした非構造化テキストデータを作成する．

  - 半構造化譜字テキストの構築
    - テキストとして翻刻された雅楽譜に含まれる譜字が持つ音楽的な意味や概念をマークアップし，半構造化譜字ユニットを構築する．

  - 楽譜資料としての翻刻
    - 半構造化譜字ユニットの典拠とした楽譜画像を含むファクシミリ領域を記述し，現物資料として存在する典拠資料と半構造化譜字ユニットとの整合性を客観的に検証可能なデータ提供を行う．

  - 音楽情報の記述
    - 楽譜には記述されていない演奏様式に関する情報や録音や映像などの時系列データなど，楽曲を軸に広がる音楽情報を付与する．

#### レベル0 非構造化テキスト資料としての翻刻 {.unnumbered}

先に指摘した通り，雅楽を含む日本伝統音楽が用いる譜や東アジア圏で伝統的に用いられてきた記譜体系の多くは文字を使用した記述体系になっており，楽譜である以前に文字情報として扱うことができる．したがって，雅楽譜のデジタル化に際しては第一に楽譜全体を文字資料としてみなし，その内容をテキストデータとして記述する水準を設定することができる．これは，クラウドソーシングによる歴史資料の翻刻を行う「みんなで翻刻」や著作権の切れた作品の全文を電子化して公開するProject Gutenberg，青空文庫の取り組みと同様のアプローチである．

テキスト情報は非構造化データと半構造化データの2つに分類できるが，まずは非構造化データとして雅楽譜に記述されている文字情報をプレーンテキストとして翻刻することを目指す水準を設定できる．もちろんこの時点では，楽譜が持つ音楽的な情報自体が機械可読に表現されているわけではないが，五線譜において様々な困難に直面している楽譜の全文検索がテキスト翻刻のみによって達成できるという点は非常に大きなメリットだろう．実際，国立国会図書館デジタルコレクションやHathiTrust Digital Library，OpenLibraryなどが提供する全文検索は私たちの日常生活において広く利用されており，読むという経験そのものを変化させつつある．それは，画像化された文字情報を書き起こしているときの徒労感や日々やり取りされる\acs{PDF}文書の中に内部検索のできない資料が紛れ込んでいたときの小さなストレスといった身近な感覚としても確実に表れている．また，そういった作業を自動化するためのOCRツールが数多く提供されていることからも，テキストが画像ではなくテキストデータとして存在していることの重要性やニーズは明らかである．

日本伝統音楽が用いる楽譜のデジタル化に取り組んできた過去のプロジェクトが，文字で書かれた楽譜を五線譜に書き起こすことでそこに含まれる音楽的な側面が反映されたデータの構築を繰り返し試みてきた事実は，日本伝統音楽が用いる楽譜が声に出して読み上げられうるある種のテキストであるという側面を見えにくくしているが，特に雅楽のような唱歌による口伝を重視する音楽文化において，楽譜は一種の読み物，あるいは台本としての側面を持っている．
また，デジタル化された楽譜のテキストと楽譜上の表記は一致するため，文字と運指が対応している龍笛と篳篥の譜字や唱歌としても歌われる笙の合竹の文字など，文字自体が一定の奏法と対応関係を持っている要素については，文字情報そのものが音楽的な要素を兼ね備えている．したがって，まずは楽譜をテキストの形式で可能な限り正確に翻刻することが雅楽譜のデジタル化に向けた第一歩であり，それらを軸としつつ，人間が楽譜を読むことで得られる情報を付け加えていくことでデジタル雅楽譜の持つ情報を少しずつ豊かにしていくことを目指すことができる．

ただし，この水準をあえてレベル``0''と呼んでいることからも推察されるように，この水準が扱う``デジタルテキストとして翻刻された雅楽譜''は構造化されたデータではない．雅楽譜が持つコンテンツ情報の電子テキスト化，それに伴う全文検索の実現は雅楽譜のデジタル化に向けた大きな進展ではあるが，本研究がより強調するのはテキストデータとして文字起こしされた譜字が構造化データとしてマークアップされ，それを軸に音楽情報の記述が行われるという点である．

#### レベル1 半構造化譜字テキストの構築 {.unnumbered}

レベル0の水準においては，譜字のテキストは構造化されていない単なる文字列であるが，レベル1の水準においてはそこに構造的なマークアップが施される．すなわち，デジタル雅楽譜としての最小構成がレベル1の水準に相当する．プレーンテキストとして翻刻されたテキストが持つ構造をマークアップすることで，データの分析や共有に役立つことは様々なマークアップ言語の存在が既に証明している．人文学テキストについてはTEIが，音楽学資料についてはMEIがその代表例であることは既に述べた通りである．

図\ref{fig:ABC}でABC記譜法の例を挙げて示したとおり，五線譜資料についてはテキストにおける文字起こしに相当する作業の方法論を確立するところから全体の議論をスタートさせる必要があり，楽曲の構造的な記述とその可視化に際して求められる情報とが明確に切り分けられていたのに対して，雅楽譜を構成する譜字はテキスト情報として直接翻刻できるため，譜字領域で表現される内容はその視覚的な構成と極めて密接な関係を持っている．

楽譜上に現れる文字が持つ概念や意味としては，題名，曲の軽重（大曲，中曲，小曲の別），拍子といった楽曲自体の情報や属性，唱歌や譜字といった譜字そのものの属性，その相対的な大きさ，譜字が持つ奏法や音高，改行，改ページといった意味的内容やテキストとしての構造が挙げられる．このような要素がマークアップされることで，本論文が提唱する雅楽情報記述の四領域モデルにおける，譜字領域が含む1つの半構造化譜字ユニットが構築される．

#### レベル2 楽譜資料としての翻刻 {.unnumbered}

新作などの例外を除いて，半構造化譜字ユニットとして構築された論理領域は既存の雅楽譜を典拠として持つ．レベル2の水準においては，半構造化譜字ユニットとその典拠として採用された楽譜に関する情報を含むファクシミリ領域を記述し，現物資料として存在する典拠元の資料とデジタル雅楽譜の間に存在する情報の整合性を客観的に検証可能なデータの構築を行う．この水準においてデジタル雅楽譜はKepper[-@Kepper2011]がデジタル版（digitalen Ausgaben）と呼んだ構造化されたデジタル楽譜とそれに関連する資料との機械可読な形式による接続が実現される．

文字譜である雅楽譜の半構造化譜字ユニットには，典拠とされた楽譜が持つ文字情報がデジタルテキストとして含まれているが，実際の楽譜においてそれがどのように可視化されているのかという点については記述されていない．たしかに，文字譜である雅楽譜をデジタル翻刻する際には，譜字として現れる記号(文字)をそのままデジタルテキストとしてデジタル楽譜の内部で扱えるため，先に挙げたABC記譜法やPAEにおける記述ほどに元の記号体系から離れるわけではないが，それでも実際の楽譜上における文字の見た目とデジタルテキストとしての文字の間には一定の距離がある．特に，典拠とした楽譜上においてUnicodeで対応できない異字体が用いられているために，典拠となる楽譜資料と譜字領域で用いられる譜字の間で字体の異なる文字を使用せざるを得ない場合など，実際にどのような視覚的情報を譜字領域の記述に落とし込んだのかということを最も直接的に示す上で楽譜画像は唯一無二の情報源である．
また，典拠元の記述と半構造化譜字ユニットの間における整合性を検証可能な状態で示すことは，単にデジタル雅楽譜が持つ情報が典拠元の情報に基づいていることを示すだけでなく，その情報が正確であることを保証するための手段としても機能しうる．

典拠となった楽譜資料そのものから読み取れる情報としては，文字の絶対的な大きさの指定や座標による各要素の位置指定なども挙げられる．個別の資料における具体的な紙面構成が最終的な検討において求められるのであれば，このような情報が記述される可能性は排除されないが，一般化不可能な楽譜の視覚的構成を記述するコストに見合うだけの価値があるのかという点は慎重に検討する必要がある．

また，譜字領域の記述に基づいた楽譜版面の再構成を試みる場合，それに必要な情報はデジタル雅楽譜の外部に記述されるべきである．すなわち，楽譜の内容に関わる記述とそれをどのようにレンダリングするのかという情報は分離して記述されるべきである．このようなデータの構造と見た目に関する記述を分離することは，データの可視化に関する方法をより自由に設計し，データ記述そのものの保守性を高める上で非常に重要なコンセプトであり，SGMLから連なるマークアップ言語が長きにわたって尊重してきた理念の1つである．例えば，ウェブページの表示に必要な情報を，コンテンツの内容とその構造を規定するHTML，見た目を規定するCSS，インタラクションを規定するJavaScriptの3つに分けることで，1つのHTMLを使用して複数の見せ方を実現しているのと同じように，テキスト資料や楽譜資料についても，見た目に関する定義をコンテンツと分離して記述することで，最終的な見た目のために構造的な記述を妥協したり，見た目の変更に際してコンテンツに関する構造に手を加えたりする危険を避けることができる．システムやデータ記述を複数の階層やモジュールに切り分けて設計する方針はseparation of concerns（関心の分離）と呼ばれており，特にMartin[-@Martin2018]が指摘するユーザーインターフェイスを切り分けることの重要性は広く認識されている
^[システムや情報記述を複数の側面に分離することで，それぞれの側面に対する変更が他の側面に影響を与えることを避けられる可能性があるのに対して，場合によっては冗長な記述が生じたり，パフォーマンスの面で不利に立たされたりする可能性がある．したがって，全体的な目的に照らして，何を分離するか，つまり1つのモジュールに対して含むべき情報を適切に定義する必要がある[@Lano2023]．]．
この原則はMEIでも採用されており，基本的には具体的なレンダリングの方法に関する手続きは構造記述の外部に存在するレンダリングエンジンに委ねられており，構造の内部で提供されるのはレンダリングエンジンが必要とする抽象的な構造にとどめられている．また，このような個別の楽譜資料が持つ版面に関する情報はデジタル翻刻した楽譜記号に対する座標として記述するのではなく，アノテーションを付与した楽譜画像との対応を取ることで対応したほうが，具体的な楽譜資料を直接参照できるという点で直感的であり，楽譜資料に関する情報をより多くのモダリティとして取り込むことができるという利点もある．

#### レベル3 音楽情報の記述 {.unnumbered}

個別の楽譜資料から得られる情報を超え，楽曲を軸に広がる音楽情報を記述することを目指すためには，その演奏や解釈に関わる情報を記述していく必要がある．すなわち，レベル2の記述に対してより豊かなファクシミリ領域や時系列メディア領域，分析領域を加えていく必要がある．先に指摘した通り，雅楽は口伝による伝承が重要な要素を占めており，五線譜と比べると楽譜から得られる情報は非常に限られている．したがって，特に実際の演奏に関する記述は楽曲の実像を捉えるうえで重要な要素である．
演奏情報や楽曲に対する解釈などをデジタル雅楽譜の記述に織り込むためには，譜字領域の記述としては現れない要素を楽譜と併記する必要がある．また，実際の演奏に関する情報の形態には複数の可能性がある．例えば，楽師が書いた書籍や解説書，五線譜による採譜や訳譜，演奏の録音や映像などが考えられ，より多くのモダリティ持つ情報を扱う必要が出てくる．
動画や録音などの時系列データについては，楽譜の構造として現れる時間軸に対して動画や録音の時間軸を関連付けることで対応できるが，その際には楽譜には記述されていない演奏様式に関する情報，すなわち楽譜の持つ記述が特定の演奏においてどのように展開されるかという情報を同時に加えていく必要がある．

SMDLは資料同士のつながりを記述するうえで論理領域を軸としてその他3つの領域が論理領域を参照することで情報の繋がりを構築するという方針を採用しているが，雅楽のように楽譜内部に含まれる楽曲構造に関する情報が少なく，楽譜と実際の演奏の間に大きな隔たりが存在する場合，録音や動画といったデータとそれに対する分析や解説といった要素を直接紐づける必要がある．したがって本研究が提唱するデジタル雅楽譜の四領域モデルにおいては，SMDLよりも柔軟で双方向的な情報接続が求められる．例えば，[-@sec-notationasarecord]章で述べた笙の手移について，楽師が特定の楽曲における奏法を解説した資料があったとしても，雅楽譜には手移の具体的な奏法に関する記述は存在せず，あくまでも3つの合竹が並んでいる状態である．この3つの合竹に対して手移の奏法に対する具体的な解説を紐づけることもできるが，もし録音や映像等で具体的な演奏資料が存在するのであれば，それらの該当箇所に対して奏法に関する解説を付与したほうがより直感的であり，関連付けられる2つの情報の間に存在する情報のギャップも少なくすることができる．


## GagakuXMLスキーマの構築

実際に具体的な資料を対象としてXMLを使用したデジタル翻刻に取り組むためには，ここまで議論してきた雅楽情報の四領域モデルの構造を参照しつつ，具体的なスキーマを構築していく必要がある．しかし，モデルとして示された構造をXMLファイルとして表現するための具体的な構造は1つとは限らない．つまり，本研究が提唱する雅楽情報記述の四領域モデルが示すコンセプトを具体的なデータとして表現する方法には複数の可能性が考えられ，仮に同じモデルを参照していたとしても，具体的な情報記述の方法としては異なるスキーマが存在しうるということである．したがって，本章が示すスキーマもまた，四領域モデルを採用した1つの具体例であり，必要に応じてその記述構造を拡張すれば，より豊かなデータ記述を実現できる可能性がある．現状，本研究において構築したスキーマが反映できているのは雅楽情報記述モデルの内，譜字領域を構成する半構造化譜字ユニットとメタデータ領域の記述，すなわち先に挙げた雅楽情報の機械可読化における4つの水準における，レベル1相当の記述を実現する段階にとどまっているが，デジタル雅楽譜を構築する上で必ず求められる半構造化譜字ユニットのスキーマの構築は，より広範な雅楽情報の機械可読化を目指すうえで必要不可欠な基盤となる要素であり，デジタル雅楽譜を用いた情報のネットワークの形成という将来的な展開に向けた出発点としては十分な意義を持つものである．

### 検討対象資料

今回，雅楽譜のデジタル翻刻にあたって，以下の2点を検討対象として選定した．なお，蒲生[-@蒲生1986]によると，現在宮内庁楽部が所蔵する3セットの明治撰定譜は式部職の罫紙が使用されており，太政官時代に作成されたものではないことが明らかになっている．したがって，現在宮内庁に残されている明治撰定譜ものちに写された写本であり，失われたオリジナル^[明治撰定譜の成立プロセスについて，特に第1回の編纂年である明治9年(1876)以前の動向を調査した蒲生[-@蒲生1986]は，現在宮内庁楽部が所蔵する明治撰定譜に対して原本と呼びうるものは，その資料の性格上存在しないと指摘している．]を現在に伝える記録といえる．
しかしながら，宮内庁楽部が所蔵する3セットの明治撰定譜は現在のところデジタル画像として公開されていない．その一部は平野[-@平野1977]による『日本音楽・歌謡資料集 楽譜総集篇』に収録されており，前小口に式部職の記載が確認できるものの，その全体像を把握することは難しい．したがって，本研究ではインターネット上でアクセス可能な雅楽譜のうち，``龍笛譜''，``篳篥譜''，``鳳笙譜''，``打物譜''といったように，楽器ごとに分冊された独立資料ではないものの中から，今後の拡張も考慮し，可能な限り規模の大きな資料を選択した．

#### 宮内庁書陵部所蔵『雅樂譜』 {.unnumbered}

1点目として取り上げるのが，宮内庁書陵部所蔵の『雅樂譜』である．この資料は国文学研究資料館が整備する国書データベースにてデジタル化されたマイクロフィルム画像として公開されている^[宮内庁書陵部[所蔵]・国書データベース[公開](1896)『雅樂譜』，[https://doi.org/10.20730/100270332](https://doi.org/10.20730/100270332)．]
．国書データベース上では3246コマの画像が1件のデータとして公開されているが，内容は全72巻分（秘曲譜を含む楽譜71巻および総目録1巻）に相当する．72巻という巻数は宮内庁楽部が所蔵する楽長本，教務本，楽器本
^[この呼称は宮内庁楽部が所蔵する3セットの雅楽譜を調査した蒲生[-@蒲生1986]によるもの．]
と呼ばれる3セットの明治撰定譜のうち，楽長本と冊数が一致
^[ただし，楽長本，教務本，楽器本，いずれの箏之部にも含まれる『輪説箏譜』の巻が存在せず，この内容は『延只拍子曲譜』の末尾に収められている．巻数が楽長本と揃っているのは，楽長本には存在しない『歌笛篳篥和琴秘曲譜』が収められているためである．秘曲の扱いについては，明治4年(1871)2月14日に「神楽家并元楽所大曲秘曲ノ譜返上ニ付其家々ニ写ヲ留ムルヲ許サス」の件名で通達が出ているが，\Citet{蒲生1986}の報告にあるように，楽長本には秘曲の楽譜が収録されていない．また，蒲生[-@蒲生1986]の調査によって明らかにされた楽長本の構成とは，曲の収録順も異なっている．楽長本は「箏は輪説譜，三管は中小曲から収録するというように，各パートそれぞれ，もっとも特徴的なものを先とする傾向が見られる[@蒲生1986, p.208]」のに対して，本資料の楽曲掲載順は「全パートを通じて，神楽を第一とし，次に大曲，中小曲の順に収録するという一貫性が認められる[@蒲生1986, p.208]」とされる教務本の特徴を持っている．さらに，楽譜のサイズが大きく異なる．楽長本が266*188mm[@蒲生1986, p.208]であるのに対して，本資料は312*211mmと大型化している．]
している．宮内庁書陵部が所蔵している資料ということからも，数ある写本資料の中でも楽部所蔵の楽譜に比較的近いと考えられる．今回取り上げた3つの資料の中では唯一明治撰定譜に含まれるすべての楽曲を網羅していることから，本研究においては資料のID作成の際に使用している．

![宮内庁書陵部所蔵『雅樂譜』の譜例（篳篥中小曲譜 壱越調 春鶯囀颯踏）](img/IHA.png){.lightbox #fig-no30}

#### 東京藝術大学附属図書館所蔵『明治撰定譜』 {.unnumbered}

2点目に取り上げたのは東京藝術大学附属図書館所蔵の『明治撰定譜』である．この資料も国書データベースにてデジタル画像が公開されている^[多久毎[書写]・東京藝術大学附属図書館[所蔵]・国書データベース[公開]（cc.1919）『雅楽譜』（[https://doi.org/10.20730/100376839](https://doi.org/10.20730/100376839)，2025-06-25取得）．]．1660コマの画像が1件のデータとして公開されているが，内容は全41巻分（楽譜40巻および楽譜総目録1巻）に相当する．書写者として記載のある<ruby>多久毎<rt>おおのひさつね</rt></ruby>は宮内省楽部の楽師であり，明治43年(1910)から大正6年(1917)までファゴットの嘱託教員として東京音楽学校で教鞭をとったのち\footnote{東京音楽学校の着任年については，東京日日通信社[-@東京日日通信社1927]が明治43年(1910)9月20日とする一方，東京芸術大学百年史編集委員会[-@東京芸術大学百年史編集委員会1987]が明治44年(1911)としている．}，<ruby>神宮神部署<rt>じんぐうかんべしょ</rt></ruby>
^[もと伊勢神宮大宮司の管理に属し，神宮のお札と暦の製造販売などをつかさどった役所．明治33年(1900)創設，昭和21年(1946)廃止．[@デジタル大辞泉2024]]
の雅楽教授として勤務した[@東京日日通信社1927]．
国書データベースには大正8年ごろの写本とあるため，おそらく東京音楽学校を退官後，神宮神部署の雅楽教授として勤務していた時期に書写されたものだと考えられる．国書データベースの書誌情報に記載がある通り，明治撰定譜の一部を写本化したものであり舞譜や秘曲譜は含まれていないが，宮内庁書陵部所蔵『雅樂譜』がデジタル化マイクロフィルム画像なのに対して，当資料はカラー画像で公開されており，朱書きによる記譜が一部に認められる．本論文においては，色を用いた情報の有無を確認しながらマークアップに取り組むため，本資料を用いて半構造化譜字ユニットの構築を行なっていく．

![東京藝術大学所蔵『明治撰定譜』の譜例（篳篥中小曲譜 壱越調 春鶯囀颯踏](img/TUA.png){.lightbox #fig-no31}

#### 雅楽譜閲覧支援サイトの整備 {.unnumbered}

雅楽に関連した資料は，まとまった量の資料を有する機関だけを挙げても，国文学研究資料館，国立国会図書館，国立公文書館，宮内庁書陵部など複数の機関に分散して所蔵されており，細かいものも合わせると，地方の郷土資料館，歴史館などにも所蔵がある．また，その検索性は決して高いとは言い難い．雅楽譜を指す名称として``雅楽譜''と``明治撰定譜''の2つが場合によっては区別なく用いられており，さらに楽器ごとの譜が独立した資料として，``龍笛譜''，``篳篥譜''，``鳳笙譜''，``打物譜''など，楽器ごとの名称を冠した形で資料登録されている場合もある．実際に検索してみると，伝習書や宮内省楽部関連の行政文書などが混在してしまい，楽譜資料だけを絞って検索することが難しい場合もあった．そこで，本研究では作業効率の改善および資料閲覧環境の整備を目指し，インターネット上でアクセス可能な上記2件の雅楽譜を主な対象として閲覧支援サイトを公開した^[「雅楽譜閲覧支援支援サイト」[https://sites.google.com/view/gagaku-scores/top?authuser=1](https://sites.google.com/view/gagaku-scores/top?authuser=1)．]．

国書データベースで公開されている宮内庁書陵部所蔵『雅樂譜』および東京藝術大学附属図書館所蔵『明治撰定譜』は
IIIFによる高解像度デジタル画像として提供されているが，どちらも複数巻にわたる資料を1件のデータとして公開しているため，閲覧者は画像をスクロールしながら希望する巻と楽曲を探し出す必要がある．閲覧支援サイトは，このような状況を解決し閲覧者が希望する巻へより簡単にアクセスできる状態を実現している．
国書データベースでは，当該資料がIIIF対応で公開されているため，各巻ごとにIIIFマニフェストを作成して公開することもできるが，同じ楽器，同じジャンルに該当する楽曲が複数巻に分かれているため，今回は各巻ごとに開始ページを開いた状態のUniversal Viewer^[Universal Viewer, [https://universalviewer.io/](https://universalviewer.io/), accessed on 2024-05-25. ]をGoogleサイトに埋め込む方式を採用した．これによって，ひと連なりの長い合本の途中に栞を挟んでいるような状態になり，閲覧者が希望する場合には巻をまたいでいても同じビューワー上で閲覧を継続することができる．特に，宮内庁書陵部所蔵『雅樂譜』については，国書データベースでは3000コマ以上の画像をスクロールしながら必要な巻やページを探す必要があったが，各巻ごとに開始ページを開いた状態で用意したことで，希望する箇所により簡単にアクセスできるようになった．

#### マークアップの対象に対するIDの付与 {.unnumbered}

楽譜出版の文化が発展した西洋音楽において出版物とそれに含まれる楽曲を特定するために作品番号を付与する習慣があり，一部ではモーツァルトのケッヘル番号，ハイドンのホーボーケン番号，シューベルトのドイチュ番号，J.S.バッハのBWV番号，ヘンデルのHWV番号など，学術的な作品整理によってもたらされた作品目録番号が整備されているのに対して，雅楽には作品番号に相当する楽曲の識別子が明確には整備されていない．

既に第 [-@sec-notationasarecord] 章 で述べた通り，雅楽における曲のまとまりはその総数を数えることが困難なほどに緩やかであり，楽曲分類の方法も複数存在していることから，西洋音楽のように抽象的な楽曲概念に対して番号を付けて管理するというスタイル自体がこれまで採用されてきていない．もちろん，調子，楽曲名，楽章（序破急の別など）によって楽曲や楽譜を特定する方法はあるが，マークアップされた楽譜を軸として繋がる複数の雅楽関連資料をより効率よく管理するためには，資料管理の軸となるIDがあると便利である．

そこで，本研究では宮内庁書陵部所蔵の『雅樂譜』を参照し，マークアップの対象に対してIDを設定した．ここでいうマークアップの対象とは，楽譜の目次に名称が記載されているものを単位としており，第 [-@sec-notationasarecord] 章で触れたような大曲との関係性や楽器による楽曲の統合などは行なっていない．したがって，これらのIDは楽曲を単位とするまとまりとは対応していないことに注意する必要がある．

将来的なデジタル化資料の拡大を見据え明治撰定譜の全体に対しても同様の仕組みで，かつ人間が理解しやすいIDを付与するため，宮内庁書陵部所蔵の『雅樂譜』を構成する部，部を構成する巻，巻に含まれる曲のそれぞれに対して付与した3つの番号を2桁に揃え，それらをアンダースコアでつないだものをIDとして設定した．ただし，実際に`@xml:id`として使用する際は，冒頭に`g`を付して`@xml:id`の記述規則に対応している．本論文においてデジタル化に取り組んだ楽曲を含む，ID番号の詳細については巻末の付録A--Dを参照されたい．

### 半構造化譜字ユニットスキーマの構築

ここから，具体的な半構造化譜字ユニットの構築について議論していく，なお，本論文が構築したスキーマを用いて作成したGagakuXMLの例は付録Eとして巻末に収録している．マークアップの全体像を掴む上でも，本文と合わせて参照されたい．

[@sec-notationasarecord]章で述べたように，雅楽の楽譜は楽器ごとに異なる記譜法が用いられている．一方で，データの利用をより簡便にするためには，基本的なデータ記述は可能な限り共通した構造を持っていることが望ましい．
Berndt[-@Berndt2018]が「同一の情報が異なる方法で記述されうる」というMEIの性質を批判的に捉え，分析のための前処理を目的としたコンバータの開発を行っていることからもわかるように，分析の対象となるXMLのスキーマが柔軟な記述を許容していればいるほど，分析に必要なデータの整形に必要なコストが高くなる．利用者のニーズに合わせた柔軟な記述が実現可能であることは重要だが，その一方で，データの整形にかかるコストを抑えるためにデータの記述に一定程度の制約を設けることも検討する必要がある．その点において，既存の楽譜資料に基づく半構造化譜字ユニットの記述はデジタル雅楽譜の中でも構造が明確に定義しやすい部分の1つである．

#### XMLの概要 {.unnumbered}

具体的な楽譜のマークアップに関する議論に入る前に，本研究が用いる基盤技術であるXMLについてその概要を示す．XMLはSMDLやHyTimeが用いていたSGMLの後継バージョンとして1998年に勧告されたものであり，文書を階層構造で記述するマークアップ言語である．
SGMLから派生したマークアップ言語としては，ウェブページに関する情報の記述用にデザインされたHTMLが恐らく最も有名だが，これはあらゆるブラウザが解釈できるよう，内部で使用できるタグが事前に定義されており，現在それらはWHATWGによって維持管理されている．一方，XMLは内部で使用されるタグの定義があらかじめ用意されておらず，利用者の必要に応じてタグを定義できるという拡張性が特徴である．

:::{#fig-no31 fig-cap="XML文書の例"}
```XML
<breakfast_menu>
  <food>
      <name>Belgian Waffles</name>
      <price>$5.95</price>
      <calories>650</calories>
  </food>
  <food>
      <name>French Toast</name>
      <price>$4.50</price>
      <calories>600</calories>
  </food>
</breakfast_menu>
```
:::

XMLの構造を用いて記述されるデータの構造を定義するのがスキーマである．XMLの代表的なスキーマ言語としてはDTD，XML Schema，RELAX NGなどが挙げられる．XMLの内部で記述されるデータの構造を定義するためには，これらの仕様に沿ったスキーマを記述する必要がある．しかし，スキーマは必ずしもXML文書に必ず必要なわけではなく，スキーマが適用されていない状態であっても，XML文書としての構文が正しいのであれば，それはXML文書として扱われる．

XMLを用いたデータ記述は非常に多くの場所で使われており，Microsoft Officeで使用されるOffice Open XML，楽譜データの交換に使用されるMusicXML，数式データを記述するOpenMath，ベクター画像の情報を記述するSVGなど，様々なデータを対象とした記述形式がXMLをベースにして開発されている．これらのファイルフォーマットでも，内部でスキーマを適用することで，データの構造を定義している．

@fig-no31 のように，XMLの文書は，複数の要素(element)と属性(attribute)が集まり， 1つのルート要素を起点とする木構造を構成する．要素は開始タグと終了タグで囲まれており，その内部に要素の内容が記述される．このように，内容をタグで括ることを``マークアップ''と呼ぶ．要素の内部にも他の要素を含めることができ，これによって階層構造が表現される．属性は要素に関する情報を記述するためのものであり，開始タグ内に属性名と属性値のペアで記述される．

#### XML文書におけるwell-formedとvalid {.unnumbered}

XMLはスキーマを使用した拡張によってさまざまなデータ記述の構造を持つことができる．そのため，記述のルールはXML自体の構文が守られているか否かと，スキーマに従った記述が行われているか否かの2つの観点から検証される．XML自体の構文は，先に挙げた開始タグと終了タグの対応や要素の正しい入れ子構造など，XMLに求められる最低限の要求が検証される．これに対して，スキーマに従った記述が行われているかどうかは，スキーマに記述された要素や属性の定義に従っているかどうかが検証される．XMLの構文が正しい文書をwell-formedなXML文書，スキーマに従った記述が行われている文書をvalidなXML文書と呼ぶ
^[日本語ではwell-formedを「整形式」，validを「妥当」と訳されるが，どちらも日本語の語義から連想される意味とXML文書としての状態との間に乖離があるため，ここでは原語のまま使用する．]．

### 半構造化譜字ユニットにおける記述の階層構造

#### マークアップの対象となる要素 {.unnumbered}
それでは，具体的にXMLを用いた雅楽譜のマークアップについて検討し，GagakuXMLのスキーマを構築していく．
雅楽譜に現れるマークアップの対象としては，楽譜冒頭の題字とその周辺要素，楽譜記述を構成する譜字，拍子・小拍子，レイアウトに関するメタ情報である改ページ，改行が挙げられる．そのうち，題字の周辺要素，拍子・小拍子，改ページ，改行の構造は三管の譜で共通している．

それ以外の要素については，三管でその構造が異なっている．篳篥及び龍笛の譜に譜字として現れる要素は主に唱歌，譜字の2つであるが，笙の譜については合竹の譜字が唱歌と譜字の要素を兼ねている．唱歌と譜字はおおむね2つで1組の関係で構成されるが，両者は親子関係にあるわけではなく，それぞれが独立した意味を持っている．同様に，合竹も登場箇所は行の内部で共通しているが，機能としては唱歌と譜字を兼ねており，唱歌や譜字と並列に扱う関係にはない．したがって，行以下に含まれる譜字の記述を楽譜上に現れた情報から得られる要素のみで構成しようとすると，行の次に現れる情報の水準にばらつきが生じることになる．

#### セル概念の導入 {.unnumbered}

このような状況を避けるため，行を構成する要素として本研究では「セル」概念を導入する．
セルは行を構成する唱歌，譜字，合竹，拍子のうち，行に直交する方向のアラインメントが取れているひとまとまりの記述で構成される．一般的に，篳篥譜及び龍笛譜の場合，最も登場回数の多い唱歌に対して譜字と拍子が整列しており，笙譜の場合，合竹に対して拍子の記述が整列しているため，セルは唱歌及び合竹1文字に対応する譜字と拍子・小拍子を内包すると言い換えてもよいだろう．ただし，唱歌と合竹の記述に基づいて行をセルに分割した場合，対応する唱歌を持たない譜字の記述に対応することができないため，ここでは行に対して直交する軸でのアラインメントを基準としてセルを定義する．

雅楽譜の記述をセルに分割するという手法は竹下[-@竹下2021]が篳篥の旋律型を研究する際に用いているが，本研究におけるセル概念とは異なることに注意する必要がある．竹下[-@竹下2021]におけるセルは「『唱歌』の大きい仮名の譜字ひとつを中心にした唱歌の仮名，運指などの情報を14次元ベクトルで表したもの」[@竹下2021, p.26]である一方，本研究におけるセルの分割はあくまでも楽譜の持つレイアウト上の整列を基準として分割を行う．

これは，主に事後処理と作業分担のしやすさを考慮したものである．竹下[-@竹下2021]が採用した区分は，楽曲の拍子によってセルに含む拍数に差が出ることが竹下[-@竹下2021]自身によって指摘されており，早四拍子の楽曲は通常2拍，早只拍子の場合は通常1拍とされている．
1つのセルに含まれる唱歌，譜字，拍子の組み合わせが1つの場合と2つの場合が混在した状態は楽譜データを再利用する場合の構文解析が煩雑になり，再利用しやすい形式とは言い難い．また，楽譜入力の際に大きい仮名文字の唱歌が1文字だけ含まれるパターンと，大小の唱歌が1文字ずつ計2文字含まれるパターンを区別する必要があるが，このような判断を非日本音楽専門家に求めることは難しく，エラーも発生しやすいことが予想される．演奏家としての経験に立脚した竹下[-@竹下2021]の手法は，音楽の専門家による研究においては有効かもしれないが，本研究のように楽譜データの再利用や拡張可能性を考慮した場合には，本研究が導入するより簡潔なセルの概念が適していると考えられる．

しかし，本研究におけるセル概念が拍子や譜字の大小に関わる記述を妥協しているわけではない．竹下[-@竹下2021]の定義するセル概念は曲に対する拍子の指示と譜字の大小から間接的に得られるため，必要があれば本研究で提供される半構造化譜字ユニットの記述内容から竹下[-@竹下2021]が用いたセルの情報を抽出することもできる．


::: {#fig-elephants layout-ncol=2 layout-valign="center"}

:::{#fig-00012 fig-cap="雅楽譜上におけるセル概念の例．"}
![](img/セル.png){.lightbox}
:::

:::{#fig-0 fig-cap="半構造化譜字ユニットにおける記述の階層"}
```
page ･･･････････････････････ 楽譜を構成するページ
 └── line ･････････････････ ページを構成する行
      └── cell ･･･････････ 行を構成する拍子
           ├── hyoshi ･･･ セルに含まれる拍子
           ├── shoga ････ セルに含まれる唱歌
           ├── fuji ･････ セルに含まれる譜字
           └── aitake ･･･ セルに含まれる合竹
```
:::

セル概念を導入した半構造化譜字ユニットの階層構造

:::


### セル以下に含まれる構造

セル以下に記述される基本要素は拍子，唱歌，譜字，合竹の4つである．これらのうち，唱歌，譜字，合竹は譜字として文字で記述されている．一方，拍子は文字ではなく朱点で記述されている．

#### 譜字のマークアップ {.unnumbered}

譜字が持つ要素は，文字とその大きさで構成されているため，文字を`<shoga>`，`<fuji>`，`<aitake>`でマークアップし，各要素の属性として各文字の大きさを記述していく．本論文においては，図\ref{オリジナル}のように，譜字を`<shoga>`，`<fuji>`の内容として記述する形式を採用しているが，MEIに倣って譜字を含むすべての情報を属性として記述する図\ref{MEI式}のような方法も考えられる．


:::{#fig-1111 fig-cap="譜字のマークアップとして考えられる2つの構造" layout-ncol="2"}

:::{#fig-0000 fig-cap="`<shoga>`および`<fuji>`で譜字をマークアップする例．"}
```xml
<cell>
  <shoga type="large">タ</shoga>
  <fuji type="large">四</fuji>
</cell>
<cell>
  <shoga type="large">ア</shoga>
</cell>
```
:::

:::{#fig-0000 fig-cap="譜字を`<shoga>`，`<fuji>`の属性として記述する例 （MEIにおける`<note>`に準じたマークアップ例．）"}
```xml
<cell>
  <shoga type="large" fuji="タ"/>
  <fuji type="large" fuji="四"/>
</cell>
<cell>
  <shoga type="large" fuji="ア"/>
</cell>
```
:::

:::

属性と要素の使い分けには明確なルールが存在するわけではなく，どちらの方法でも同じ情報を記述することができる．しかし，MEIがすべての記述を属性として記述するスタイルを採用しているのは，西洋音楽の楽譜をマークアップする際にXMLファイル上にマークアップの対象となるテキストが存在しないためであると考えられる．一方，雅楽譜の場合は人間にとって読める文字が楽譜上のデータとして表れるため，譜字は要素としてマークアップして，要素の付加的な情報である文字の大きさを属性として記述することが適切であると考えられる．
これは，プレーンテキストとして文字起こしされたレベル0相当の雅楽譜テキストをマークアップするというデータ構築上のプロセスを反映する上でも有効な方法である．

また，笙の譜については`<cell>`の内部に`<shoga>`，`<fuji>`に代えて，`<aitake>`を記述する．`<aitake>`は合竹の譜字を記述するための要素であり，属性として`@kigaeHyphenation`を含む場合がある．これは，ハイフンのような縦棒で繋がれた合竹の関係性を示すために用意された属性である．先にも指摘した通り，この縦棒で繋がれている合竹は気替を行わずに一息で演奏することを示している．具体的には図\ref{fig:encodingSample3}縦棒で繋がれた合竹のうち，最初の合竹に`@kigaeHyphenation="begin"`，途中の合竹に`@kigaeHyphenation="middle"`，最後の合竹に`@kigaeHyphenation="end"`を記述する[^0023]．

[^0023]:XMLのタグや属性の名称は以下の規則に従っていれば自由に設定してよい．

    - 要素名は文字もしくはアンダースコアで始めなければならない．
    - 2文字目以降には文字，数字，ハイフン，アンダースコア，ピリオドを含むことができる．
    - XMLの予約語を使用してはならない．
    - 要素名としてスペースを含めてはならない．
    
    ただし，実際にはいくつかのベストプラクティスが存在している．例えば，減算演算子として解釈されうるハイフン，オブジェクトとプロパティの関係を示す際に使用されるピリオド，名前空間の指定に使用されるコロンの使用を避けることで事後のトラブルを未然に防ぐことができる[@W3Schools2024]．本研究ではGoogle[-@Google2008]によるスタイルガイドにしたがって，要素や属性の名前はlowerCamelCaseで表記している．しかし，Google[-@Google2008]自身が書き添えているように，ガイドラインは先人たちの知恵ではあるが，それを厳密に守ることでかえって全体のデザインを損ねるようなことがあるならば，既存のスタイルから逸脱することを躊躇してはいけない．これは，本論文が提供するGagakuXMLスキーマの拡張やカスタマイズにおいても同様である．


:::{#fig-000000 fig-cap="縦棒で繋がれた気替を行わない合竹のマークアップ例" layout-ncol="2 " layout-valign="center"}

![](img/kigaehyphenation.png){}

```xml
<cell>
  <hyoshi type="large"/>
  <aitake kigaeHyphenation="begin">下</aitake>
</cell>
<cell>
  <aitake kigaeHyphenation="end">乚</aitake>
</cell>
<cell>
  <hyoshi type="small"/>
  <aitake>凢</aitake>
</cell>
```
:::

#### 譜字以外の要素に関する記述 {.unnumbered}

続いて雅楽譜の中に表れる譜字以外の要素に関するマークアップについて述べる．譜字以外の要素としては，文字としての情報を持つ楽曲構造や反復に関わる記述（返付，自是，重頭など）と，文字としての情報を持たない拍子，改行，改ページ，に分類することができる．

:::{#fig-000000 fig-cap="譜字以外の要素に関するマークアップの例" layout-ncol="2 " layout-valign="center"}

![](img/自是.png){}

```xml
<lb/>
<koreyori place="right">自是</koreyori>
<cell>
  <hyoshi type="small"/>
  <shoga type="large">チ</shoga>
  <fuji type="large">丅</fuji>
</cell>
<cell>
  <shoga type="large">イ</shoga>
</cell>
<cell>
  <hyoshi type="small"/>
  <shoga type="large">ヒ</shoga>
  <tataku>丿</tataku>
</cell>
<cell>
  <shoga type="large">ラ</shoga>
  <fuji type="large">一</fuji>
</cell>
```
:::

これらの要素は`<cell>`の直下に記述されるものと，`<cell>`とともに行を構成する要素として記述されるものに分類できる．まず，譜字に対して付与され，`<shoga>`，`<fuji>`とともに`<cell>`の子要素として記述するものは，`<hyoshi>`と，譜字と同じ行に記述される〻，動，由など演奏に関する指示に関する記号が挙げられる．
大小の別については，`<shoga>`，`<fuji>`と同様に属性として`@type`に記述する．

次に`<cell>`と並列の階層に挿入する要素としては，行の始まり（line beginning）を示す`<lb/>`(line beginning)，ページの始まりを示す`<pb/>`(page beginning)，楽曲の構成や反復を支持する返付，重頭，自是などの記述が挙げられる．
既に人文学資料のマークアップ経験がある利用者のため，`<lb/>`，`<pb/>`といった要素はTEIガイドラインでも用いるものを採用する．文字としての情報を持つ楽曲構造や反復に関わる記述については楽譜上に登場する文字情報に合わせて，`<kaeshiduke>`，`<koreyori>`，`<juto>`などのタグを用意し，`<shoga>`や`<fuji>`と同じように，テキストをタグ付けする形でマークアップしていく．各要素の位置を記述する場合は`@place`属性を，文字の向きを記述する場合は`@style`属性を用いる．`@place`はTEIに準じ，`right`，`left`，`inline`の3つの値を取る．`@style`の値は，文字が読まれる方向に応じて，`tb`(top-to- bottom)，`rl`(right-to-left)，`lr`(left-to-right)を取る．

`@place`や`@style`で記述されるレイアウト関連の情報は音楽的な情報とは関連がないように思われるかもしれないが，西洋音楽における五線譜の改行位置や改頁位置が楽譜の読みやすさを支える要素として重要視されているように，雅楽譜においても何らかの情報を持っている可能性がある．実際，図\ref{fig:IHA_sample}及び図\ref{fig:TUA_sample}を見比べると，判型が大きく異なるにも関わらず楽譜の改行位置は概ね一致している．この例だけから断定することはできないが，宮内庁書陵部所蔵の『雅樂譜』を写した人物は，1行あたりの文字数を増やすのに十分な紙幅があったにも関わらず，オリジナルの雅楽譜が持つ改行位置を維持すべきものとして尊重している可能性がある．このような傾向は図に示すような，唱歌を含まない雅楽譜には見られないため，唱歌を譜字に併記するスタイルが浸透した後にもたらされた習慣であると考えられる．

#### すべての要素に共通するグローバル属性 {.unnumbered}

ここまで，具体的な楽譜内の記述について述べてきたが，すべてのタグに共通する属性として`@xml:id`，`@n`が存在する．`@xml:id`は各要素を一意に識別するための属性であり，各要素が持つ参照関係の記述を実現する．`@n`は楽譜内の順序を示すための属性である．

`@xml:id`は内部スペースを含まず，文字またはアンダースコアで始まり，XML仕様で定義されている文字，数字，ハイフン，アンダースコア，ピリオドで構成されることが求められる．`@n`は数字のみで構成される必要がある．
`@xml:id`は1つのXML文書の内部において一意である必要があるが，`@n`は重複が許される．したがって，本論文が提供するGagakuXMLでは，`<lb/>`に付与される`@n`は行番号，`<pb/>`に付与される`@n`はページ番号を示す属性として使用している．

:::{fig-cap="デジタル雅楽譜における`<front>`の記述"}
```xml
<music>
  <front>
    <title>
      % 曲名
    </title>
    <sizeCategory>
      % 大曲，中曲，小曲の別を示す
    </sizeCategory>
    <hyoshi>
      % 拍子に関わる記述を示す
    </hyoshi>
    <kuwaeHyoshi>
      % 加拍子に関わる記述を示す
    </kuwaeHyoshi>
    <kodo>
      % 後度の記述を示す
    </kodo>
  </front>
  <body>
    % 半構造化譜字ユニットの記述
  </body>
</music>
```
:::

#### 譜面上に現れる楽曲構造以外のマークアップ {.unnumbered}

ここまで，楽譜上に現れる楽曲構造を示す要素についてはマークアップの構造を示してきたが，楽譜上に現れる要素は楽曲の構造に関する記述だけではない．すでに示した譜例を見ても分かるように，各楽譜の冒頭にはタイトルや楽曲の軽重を示す大曲・中曲・小曲の別，拍子，加拍子に関する情報など，楽曲そのものに関する情報が記載されている．このような情報はメタデータであると同時に，楽譜上にも現れる情報としてマークアップすることができる．

そこで，本研究が提供するスキーマでは，楽譜が持つ楽曲の構造，すなわち半構造化譜字ユニットのマークアップの全体を`<body>`としてマークアップし，それとは別にタイトル周辺の情報を`<front>`としてマークアップする．`<front>`内部には，楽譜上に現れるタイトル，大曲・中曲・小曲の区別，拍子，加拍子，後度の記述をそれぞれ，`<title>`，`<sizeCategory>`，`<hyoshi>`，`<kuwaeHyoshi>`，`<kodo>`としてマークアップする．


### 複数資料を参照した翻刻作業を行う際の課題

本研究ではここまでに議論してきたXMLの構造を用いて，唐楽中小曲に含まれる三管の譜，93曲分，279件について，半構造化譜字ユニットのマークアップを行った．主たる資料として取り上げた2件の資料を参照しながら作業を進めると，当然ではあるが資料間には複数の相違点が確認できた．ここでは，それらの例を示しつつ複数の資料を参照した翻刻作業を行う際の課題について考察する．

#### 改行位置の相違 {.unnumbered}

図\ref{fig:改行}は宮内庁書陵部が所蔵する『雅楽譜』と東京藝術大学が所蔵する『明治撰定譜』の龍笛譜 双調 \jworktitle{颯踏}の譜における改行位置の相違を示している．図\ref{fig:颯踏右}では行末の唱歌が``ロ''で終わっているのに対して，図\ref{fig:颯踏左}では行末の唱歌が``ル''で終わり，次の行の冒頭に``ロ''が現れる．このような改行位置の違いは『明治撰定譜』の編纂以降の譜はもちろんのこと，図に示したような譜字のみで構成された雅楽譜の翻刻に向けて本研究を拡張する際に特に大きな課題となるだろう．改行の位置が異なるということは，行単位で切り出される情報の内容が楽譜間で異なることを意味する．異なる楽譜資料の間で対応する記述の関係性を明示的に示すためには，各唱歌や譜字といった，行よりも細かい単位でマークアップされた情報同士を接続する必要がある．また，今後唱歌や譜字の欠損，欠落といった問題に対応しつつ2つの楽譜間の記述を接続するためにも，楽譜上に現れる文字を単位とした情報の関連性を表現する方法が求められるだろう．

:::{#fig-0123 layout-ncol="2" fig-cap="楽譜ごとに異なる改行位置の例"}

![龍笛譜 双調 《颯踏》（宮内庁書陵部所蔵）](img/双調_颯踏_宮内庁.png){#fig-}

![龍笛譜 双調 《颯踏》（東京藝術大学所蔵）](img/双調_颯踏_藝大.png){#fig-0123-1}

:::

#### 唱歌と譜字のアラインメントのずれ {.unnumbered}

既に述べた通り，本研究が構築したスキーマにおける`<cell>`は楽譜上において水平方向にアラインメントのとれる唱歌と譜字を含む記述のまとまりであるが，図\ref{fig:アラインメントのずれ}に示す通り，実際の楽譜には水平方向にアラインメントの取れない唱歌と譜字が存在する．
このような`<cell>`に含むべき要素のまとまりが楽譜上の記述から明確に判断できない場合には，いくつかの対応方法が考えられる．まず，第一に，専門家による判断に基づいて，`<cell>`の内部に含む唱歌と譜字を決定する方法が考えられる．この場合，楽譜上で認められるアラインメントのずれは`<cell>`の記述としては現れないことになる．したがって，各マークアップについて，`<cell>`の例外的な運用が存在することをメタデータの形で記録しておく必要がある．第二に，`<cell>`の最初の定義に従い，アラインメントのとれない箇所については，唱歌と譜字をそれぞれ別の`<cell>`としてマークアップする方法が考えられる．この場合，アラインメントのずれは`<cell>`の記述として含まれることになる．一方,`<cell>`の処理を行う際には，その中身が`<shoga>`や`<fuji>`，もしくはその他の演奏指示を示す文字のみで構成されている可能性を考慮する必要がある．構築されたデータを使ってどのような処理を行うかによって，どちらの方法が適切かは異なるが，重要なのはスキーマがあらゆるケースに対応できるように設計されているわけではないことを理解したうえで，最適な方針を定め，それに基づいた一貫性のあるマークアップを行うことである．

:::{#fig-0123 layout-ncol="2" fig-cap="楽譜ごとに異なる改行位置の例"}

![龍笛譜 双調 《回盃楽》（宮内庁書陵部所蔵）](img/回盃楽_宮内庁.png){#fig-0123-1}

![龍笛譜 双調 《回盃楽》（東京藝術大学所蔵）](img/回盃楽_藝大.png){#fig-0123-1}

:::


本研究においては，マークアップの対象として東京藝術大学所蔵の『明治撰定譜』を選択しているため，先に触れた改行の位置，アラインメントのずれに関してもマークアップ対象資料に基づいたデータ作成を行っている．ただし，あくまでも楽譜上に現れる記述を筆者が判読した情報だけに基づいているため，各文字が持つ情報を正確に反映しているとは限らない．
音楽的な文脈に照らしてその文字が持つ意味を正しく理解した上で，その文字が本当に正しいか否かを判断しながら作成されたデータと，楽譜上の文字を単に仮名として読めるだけの人間が作成したデータでは，その信頼性に大きな差が生まれる．本研究が構築したデータに対する信頼性をさらに高めるためには，今後楽譜上に現れる楽譜の文字が本当に正しいか否かを判断できる専門家の協力をえる必要があるだろう．

これは，後に述べるスキーマの構築とそれに伴う作業分担とも密接に関わる問題である．スキーマを構築することによってXML上で再現されるべき記述構造を共有し，作業者に対して一定の制約を与えることでより正確なデータの構築を可能にする．一方，そのスキーマに基づいているということと，そのスキーマに基づいて作成されたデータが正しいということは必ずしもイコールではない．もちろん，作業の分担によってより多くのデータが構築されることは望ましいが，そのデータの正確性を担保するためにはスキーマに基づいて作成されたデータを再度専門家が確認する必要があるだろう．このように，音楽情報，特に楽譜データの構築においては，単に翻刻対象とした資料に書かれた記号が読めるという水準のみならず，読み取られた記号に対する信頼性を担保するための専門的な知識が必要である．この点については，情報の構造やそこに配置されうるデータの種類などを定義するスキーマの構築だけでは対応可能な問題の範疇を超えているため，今後の研究課題として残されることになるが，専門家による確認を支援するような別の方法は考えられるだろう．

例えば，本研究が使用している楽譜画像は全てIIIFで公開されているため，マークアップされた行，セル，唱歌，譜字といった要素が楽譜画像上のどこに相当するのかを示す情報を付与することができる．このような情報を付与することによって，マークアップされた要素が楽譜上のどこに相当するのかを可視化し，専門家がその内容を確認するための支援を行うことができるだろう．このような，画像資料との構造化された楽譜データの関連付けは，本研究のさらなる発展に向けた重要な要素である．

### RELAX NGを用いたスキーマの構築

ここまで，XMLを用いた半構造化譜字ユニットのマークアップについて述べてきた．これらの記述自体はXMLの構造に準拠したwell-formedな記述だが，それがここで定義した記述構造に合致したvalidなXMLか否かを検証するためにはこれらの構造を定義するスキーマの構築が求められる．

スキーマの構築はXML上で再現されるべき記述構造を共有し，より効率よく統一されたデータを構築するためにも有効である．XMLのスキーマ言語にはDTD，XML Schema，RELAX NGなどがあるが，本研究ではRELAX NGを用いてスキーマを構築した^[DTDはXMLの初期のスキーマ言語であり，SGML時代から使用されてきた歴史のあるスキーマ言語である．一方，XML SchemaはDTDの後継として開発されたが，その整備までの間に複数の独自スキーマが登場した．RELAX NGはそのような独自スキーマとして登場した，RELAX（Regular Language description for XML）とTREX（Tree Regular Expressions for XML）を統合する形で2001年にリリースされた．]．

これによって，XMLの構造が想定通りであるかどうか，つまりスキーマの構文に従ったvalidなものであるかを確認することができる．例えば，本論文が導入したセル概念では，1つのセルの内部に唱歌や譜字が複数含まれることはないため，セル内部に`<shoga>`や`<fuji>`が1回以上出現した場合はXMLの構造としてwell-formedであっても，今回想定しているXMLの構造には合致していない．スキーマを作成することによって，このような状態をエラーとして検出することが可能になる．本研究ではこのようなタグ同士の関係性に加え，`<shoga>`，`<fuji>`，`<aitake>`がマークアップすることのできる文字種の制約もスキーマに含めている．

譜字の譜字として用いられる<ruby>夕<rt>しゃく</rt></ruby>は漢字だが，唱歌の譜字として用いられるタはカタカナであったり，篳篥の叩きを示す<ruby>丿<rt>べつ</rt></ruby>はカタカナのノではなく<ruby>丿乀<rt>へつほつ</rt></ruby>で用いられる漢字であったりと，雅楽譜の中には紛らわしい字がいくつか用いられているが，スキーマにマークアップの対象となる譜字を予め指定しておくことによって，譜字にカタカナのタが混じったり，<ruby>丿<rt>べつ</rt></ruby>がカタカナのノとして入力されたりすることを防ぐことができる．
読んだ文字を入力するというごく当たり前の作業であっても，このように似た形の文字を読み間違えるということは当然発生しうる．また，仮に丿がカタカナのノではないと分かったとしても，丿自体が読めなければ入力する手段もないという問題に直面することになる．そのような状況で，ノによく似た字をノとして入力させないためにもスキーマによる制約をかけることは重要である．
また，エディターによっては読み込まれたスキーマの指定する入力候補をユーザーに表示する機能もあるため，間違いを指摘するだけではなく，その後の入力支援につながる可能性もある．

さらに，スキーマによる入力の制限は雅楽譜のデジタル化に向けた作業を分担する上でも強力なツールになる．XML内の特定の場所に入力可能な唱歌や手付の文字種を制限するということ自体が一種の知識共有であり，スキーマによる入力支援によって同等の知識を持たない人であっても作業分担者としての役割を果たすことができる可能性がある．もちろん，実際の翻刻作業においては，スキーマの想定していない例外も登場しうるため，それをどのように記述するかという点については専門家の判断が求められる．しかしながら，翻刻作業の全体を専門家が担う必要はなく，想定された記述に従ってデータを作るという水準においては，仮名が読み取れる人であればデータの正確さを担保しつつ，より多くの人が作業に関わることが可能になるだろう．このような専門家とそうではない人との作業分担は，より多くの資料をデジタル化の対象とするためにも重要な要素である．

ただし，既に触れている通り，スキーマに基づいたvalidなデータが必ずしも正しいデータであるとは限らない．スキーマに基づいて作成されたデータは，あくまでもスキーマに従ったvalidなデータであるため，その内容が正しいか否かは別の問題であることに注意する必要がある．

#### スキーマの整備とCUIのメリット {.unnumbered}

スキーマで入力に制約をかけることでデータの正確さをコントロールすることができるのは，雅楽譜をテキストとして扱う1つのメリットでもある．

クラウドソーシングによる楽譜の機械可読化に失敗したOpenScoreプロジェクトが直面した問題は，データ作成者としてプロジェクトに参加したボランティアが入力内容の構造的な正しさよりも見た目の再現性に重きを置いてしまったことだったが，これはGUIを搭載する楽譜制作ソフトウェアを使用している以上避けることは非常に難しい問題である．なぜならば，楽譜制作ソフトウェアを使用するユーザーはデータが持つ構造を直接確認できない状況に置かれ，画面上で五線譜としてレンダリングされた楽譜からしかその正しさを判断する材料を得られないためである．このような状況では，どれだけデータの構造的な正確さを意識していたとしても，見た目の確からしさに影響を受けてしまうことは避けられないだろう．特に，デジタル化の対象となる既存の楽譜がお手本として存在しており，それらを写し取ることが求められる場合には，そのような問題がより顕著に現れることが予想される．実際，雅楽譜を物理的に紙から紙へと書き写す状況を考えると，仮に写譜を行っている人物が夕をタだと思ったり，丿をノだと思って書き写してしまったとしても，それを見た読み手はタを夕として，ノを丿として読むことができるだろう．極端に言えば，字や楽譜としての意味を全く理解していなかったとしても，見本を見ながらそこに書かれている内容を図形として正確に写し取ることさえできれば，その図形は楽譜として正しく解釈される可能性がある．このような状況においては，見た目とそこから読み取られる情報がシームレスに統合されており，そこから情報を得られるか否かは読み手の能力に依存している．GUIを持ったソフトウェア上で人間がこれまで経験してきた書き写すという行為を再現してしまうと，人間とコンピュータの間に存在する``正しさ''の違いが，結果として人間が見た目から判断した正しさと，コンピュータにとっての論理的な正しさの間に生じた齟齬として如実に表れてしまう．また，楽譜制作ソフトウェアは最終的に印刷して人間が読む楽譜を作ることを目的にデザインされており，大多数のユーザーはそれと同じ目的でソフトウェアを使っている．したがって，仮にデータとして整合性が取れない場合であってもエラーを出してレンダリングを放棄することは許されず，ユーザーの入力や操作に対して常に何らかの楽譜版面を構成してフィードバックを与えることを求められている[^0024]．


[^0024]:GUIを搭載した楽譜制作ソフトウェアがユーザーに視覚的な要素を意識させやすいが故にデータとしての整合性が二の次になってしまうという問題はデータ構築において大きな問題になるが，楽譜版面の構成における純粋な柔軟性という点で比較するとGUIを搭載した楽譜制作ソフトウェアよりもCUIで入力を行う楽譜組版ソフトウェアのほうが勝っていた時代があり，その傾向は古楽や現代音楽といった特殊な楽譜において一部で現在でも認められる．確かにGUIを搭載した楽譜ソフトウェアは記号や文字を楽譜上で比較的自由に配置できるが，一方で既に画面上に現れている音楽構造から逸脱しようとすると途端に設定画面を深いところまで探る必要が出てくる．当然，一般的な楽譜制作ソフトウェアはユーザーにとってより使いやすい機能を追求することで発展してきており，拍子記号が示す1小節分の音価を使い切ったら次の小節へとカーソルが勝手に移動し，拍子記号の定義以上の拍が1小節に含まれる状態を回避しようとする．このような機能は一般的にユーザーにとって便利であり，記譜法に関する細かいルールを把握していなくても比較的正しい楽譜が作成できるというメリットがある．

    一方，例えば，図\ref{fig:篳篥音域}や図\ref{fig:龍笛音域譜字}の音域図内で用いた楽譜のように，1小節の内部で全音符を複数表示させるといった特殊なニーズに応えるためには，楽譜上で表現される記譜法や音楽理論の正しさではなく，入力として与えた構造記述を忠実に出力することが求められる．人間の入力に対して忠実であるということは，人間側にレイアウトに関する細かい指定を要求するという煩雑さと表裏一体であり，ユーザーは楽譜組版や記譜法に関する規則を網羅的に把握しておく必要があり，仮にも楽譜組版ソフトが定義する構文から外れた記述が1か所でもあれば楽譜自体が出力されない．一方で，その構文さえ守れていればGUIを搭載した楽譜制作ソフトウェア以上に柔軟なレイアウトが実現できる．

    このような楽譜制作ソフトウェアにおけるGUIとCUIに対するニーズに関して，CUIを搭載した楽譜組版ソフトとしてMusiX\TeX と並んで現在でも開発が続いているPhilip's Music Scribeの開発者であるPhilip Hazelは作曲家や編曲家が直感的に操作できるWYSIWYGエディタを好む一方，思い通りの紙面構成を実現するための学習を厭わない楽譜出版者はWYSIWYMなソフトウェアを好む傾向にあると述べている[@Hazel2007, p.16]．

一方，デジタルデータとして楽譜情報を記述する場合，そのデータを解釈するのは第一にコンピュータであることを想定しなければならない．コンピュータに対してタと夕を文脈に応じて解釈するように期待することは出来ないため，人間側がデータをより正確に作成するための仕組みを持ち，データに間違いがあれば警告する仕組み作りが求められる．身の回りのあらゆる情報がグラフィカルに表現されている昨今のメディア状況においてCUIによるデータの構造化は人間にとっては非直感的な作業かもしれないが，視覚的な情報が制限されている状態は人間を構造的な記述に集中させるという点においてもメリットとなる．このように，WYSIWYGとWYSIWYMは単にインターフェイスの違いにとどまらず，データの作成において人間に何を意識させ，最終的なアウトプットとして何を求めるかという点においても大きな違いを持っている．

ただし，スキーマによる制約はデータ内容の正確性を維持するうえで有効である一方，それらが使用される状況によって適切な制約の度合いが異なることに注意する必要がある．今回整備したようなマークアップの対象にまで制約をかけるスキーマは，正確なデータを構築するという目的においては有効である一方，今回半構造化譜字ユニットの典拠とした楽譜以外を対象としたマークアップ作業中には，今回譜字として規定した文字以外の文字を`<shoga>`や`<fuji>`としてマークアップする必要が生じる可能性もある．そのような場合には，既存のスキーマに合わせる形でマークアップの対象を読み替えるのではなく，スキーマによって課される制約を調整して，マークアップすべきものを適切にマークアップできるスキーマを作成しなければならない^[MEIが自らの立場を``ガイドライン''と宣言し標準規格を目指さないのも，マークアップにおける柔軟さを維持し，楽譜データの多様性に対応することがその理由の1つである．ガイドラインでも推奨されているように，適切に拡張されたスキーマを用いることで記述されるべきデータの内容と要素や属性の持つ意味が適切に対応したファイルが構築され，その後の利用や分析に役立つだけでなく，継続的なデータの保守にもメリットがある．データの内容とその記述のために用いるスキーマの構造が乖離してしまっている1つの例として，先に上げた日本伝統音楽が用いる楽譜のデジタル化に向けた取り組みが挙げられる．MusicXMLをはじめとする既存の楽譜フォーマットで全く異なる記譜法で書かれた楽譜に対応しようとした結果，内部でタグの持つ意味を恣意的に読みかえざるを得なくなり，その結果本来記述されているべき内容とタグの持つ意味との間に齟齬が生じてしまうという状況がしばしば見られる．]．

### メタデータの記述領域の整備

メタデータとは``データについてのデータ''である．データの構築を目的にしていると，どうしてもデータの中身が重要視されがちではあるが，データの構造を明確に示し，検索や利用を効率化するためには，メタデータの丁寧な記述が欠かせない．
しかし，その重要性とは裏腹に，メタデータの少ない，もしくはまったくないデジタルデータはインターネット上に溢れかえっており，何らかのコストをかけて作成されたであろうデータが何のデータなのかもわからないまま埋もれてしまうことがしばしばある．

紙に書かれた文書や物語であれば，そのコンテンツを人間が読んで理解できることを前提として問題ない場合もある．すでに指摘しているように，タイトルをつけるという習慣が希薄だった時代には，文書や作品の冒頭を構成するコンテンツを取り出してきて，それをタイトルの代わりとするインキピットの習慣が，音楽をはじめ，詩歌，聖書，法律など，様々な領域で実践されてきた．また，物理的なメディアを用いて情報を記録する場合．そのメディアが持つ構造やメディア使用における習慣が，メタデータの記述を促す仕組みとして機能している場合もあるだろう．例えば，雅楽譜の場合は表紙に題簽が貼り付けられており，そこに譜本のタイトル，調子，楽器などの記載がある，さらに，各楽曲の冒頭には楽曲名や拍子に関する情報を記述する習慣が存在しており，その習慣を守る過程において自然とコンテンツに関するメタデータが付与されていく．また，判型や四ツ目綴など，楽譜自体に内在している物理的な特徴も，それが東アジアの書籍であることを示す情報であると言えるだろう．
一方で，デジタルデータの場合は物理的なメディアの性質によってもたらされる習慣に頼ることができず，データを何の文脈もない状態で存在させることが簡単にできてしまう．デジタル雅楽譜の場合，単に半構造化譜字ユニットの記述が含まれるテキストデータだけが存在していても，それが雅楽譜であると判断できる人はごく限られるだろう．したがって，可能な限りデータの背後に存在する情報をデータの内部に記述しておく必要がある．

メタデータとして扱いうる情報として何を記述するかという習慣は，データの性質や，そのデータを取り扱う環境，利用目的によって異なる．例えば，作品や文書の冒頭であるインキピットを作品のメタデータとして使用していたということを既に指摘しているが，それは同時に作品や文書に対してタイトルをつけるという現在では当然の習慣がなかったか，もしくは現在に比べて相対的にタイトルの重要性が低かったことを示しているといえるだろう．
一方，より効率的なデータの交換や相互運用を目指す上で，可能な限り共通化されたメタデータ記述を用いることは有効な手段である．一定の規則に従って記述されたメタデータが整備されたデータであれば，仮にデータの所有者が異なる場合であって，それらのデータは相互に運用することができる．また，データの内容が直接は理解できない場合であっても，メタデータを通してデータの持つ性質や内容の概要を把握することもできるだろう．

このように，メタデータの記述は情報の整理や検索を効率化するための手段としてなくてはならない存在であり，その傾向はデジタルデータにおいても同様か，さらに増大している．特に本研究が提唱するデジタル雅楽譜のように，何らかの典拠となるデータが既に存在している二次的資料としてデジタルデータを構築する場合には，一次的資料に対するメタデータ以上に複雑な情報を記述する必要がある．

本研究が構築する半構造化譜字ユニットの記述に対しては，主に3つの側面からメタデータの記述が可能だろう．第一にデジタル化によってもたらされたデータそのものに関する情報，第二にデジタルデータを生成する際に参照した典拠に関わる情報，第3にデジタル化の対象となっている楽曲そのものに関する情報である．


  - デジタルデータそのものに関する情報
    - デジタルデータに関する情報とは，データそのものが持つ情報を記述することを目的としたメタデータである．言い換えるならば，デジタルデータを一時的資料としてみる観点によってもたらされるメタデータともいえる．すなわち，データ構築の過程や使用されたツール，データそのものの作者，データの内容に対する責任の所在，データに対する名称，データ利用に関する権利や制限といった内容で構成される．また，使用されている文字コードやフォーマット，データの作成日時や更新日時，データのバージョンなど，データファイルそのものが持つ情報を記述する可能性もある．
  

  - 典拠に関する情報
    - デジタルデータを生成する際に参照した典拠に関わる情報とは，データの構築において参照された情報や，その情報の信頼性に関する情報を提供するものである．半構造化譜字ユニットを対象とすると，典拠となった資料の名称，編集者，出版年，出版社，所蔵者，典拠そのものに関する権利情報などが該当する．データ作成の典拠に関する正確な表示は，作成したデータ自体に対する信頼性を高めるとともに，そのデータをどのように使用するかを検討するうえでも重要な情報である．
  

  - 楽曲そのものに関する情報
    - ここまでに挙げた2つのメタデータとは異なり，楽曲そのものに関するメタデータはデータの中身とより密接な関係にある．音楽の場合は，楽曲のタイトル，作曲者，編曲者，作曲年，調，拍子，楽器編成，楽曲様式，楽曲のジャンル，時代区分など，デジタル化された情報の内部で記述されている作品そのものに関する情報が該当する．このような情報は，データの内容を理解するための情報を提供するという面にとどまらず，そのデータを検索するためのインデックスとしての役割も重要である．
  



このような1つのXMLファイルに対応する複数の観点で書かれたメタデータを記述するために，本研究ではMEIの提供するメタデータ記述領域を用いる．学術利用を想定して整備されたMEIは非常に充実したメタデータ記述領域も持っており，上記3つの観点に対応するメタデータ記述はもちろんのこと，必要があればさらに深いメタデータの記述を行うこともできる．もちろん，雅楽譜を対象としたメタデータ記述を一から構築することも可能性としては考えられるが，先にも指摘した通り，データそのものの管理，検索，相互運用可能性を維持するうえでは，メタデータの記述が共通化された規則に従って記述されていることが求められる．MEIのメタデータ記述領域は図書館情報学を中心に展開されてきたメタデータ記述構造の標準が求める要件を反映した構造を持っているため，その利用はメタデータの相互運用性を高めるうえでもメリットがある．

#### MEIが提供する`<meiHead>`を使用したメタデータ記述 {.unnumbered}

MEIは楽譜データのメタデータを記述するための要素として`<meiHead>`を提供している．学術利用を想定したデジタル楽譜のガイドラインを提供しているMEIは，研究者のニーズに応えうる充実したメタデータ記述の構造を持っており，図書館資料やアーカイブズ資料として音楽資料を扱うことを想定したうえで，既存のメタデータ記述に準拠したデータ記述構造を持っている．したがって，MEIが提供するメタデータ記述構造を可能な範囲で採用することで，デジタル楽譜のメタデータ記述をより効率的に行うことができる．`<meiHead>`要素の子要素としては，以下の7つの要素が記述されうる．


- `<altId>` (alternative identifier)
  - 既存の識別子が`@xml:id`の定義に合わない
\footnote{例えば，半角数字，ピリオド，ハイフンで始まる文字列は`@xml:id`として使用できない．}，あるいは複数の識別子が必要であるなどの理由から，`<meiHead>`内の`@xml:id`に収まらない書誌識別子が含まれる．

- `<fileDesc>`(file description，required)
  - MEIファイルに関するすべての書誌的記述が含まれる．

- `<EncodingDesc>`(encoding description，optional)
  - 電子ファイルとその元となった情報源との関係，およびマークアップに使用されたアプリケーションに関する記述が含まれる．

- `<workList>` (work list，optional)
- 抽象的な作品概念が持つさまざまな特徴に関する情報の記述が含まれる．

- `<RevisionDesc>`(revision description，optional)
- 符号化に際して加えられた変更に関する情報が含まれる．

- `<extMeta>`~ (extended metadata)
  - MEIが提供するメタデータフォーマット以外で記述されたメタデータが含まれる．

- `<manifestationList>`
  - FRBRにおける体現形に関する記述，すなわちある作品が物理的な形態を伴う形で具現化された対象に関する記述が含まれる．
  


この中でも，作成されたXMLファイル自体に関する情報が記述される`<fileDesc>`は必須要素とされており，TEIが提供する`<fileDesc>`とEAD
  \footnote{符号化記録史料記述．アーカイブズの検索手段を電子的に符号化するための事実上の国際的なデファクトスタンダードとなっており，図書資料に対して整備されている機械可読目録(MARC)のアーカイブズ版に相当する[@五島2007]．カリフォルニア大学バークレイ校図書館が主導するプロジェクトとしてスタートし，現在ではSAA(米国アーキビスト協会)と米国議会図書館のネットワーク開発MARC標準局によって管理されている．}
が提供する
`<fileDesc>`
^[Encoded Archival Description Tag Library Version EAD3 1.1.2，
  \textit{File Description}，
  [https://www.loc.gov/ead/EAD3taglib/EAD3-TL-eng.html](https://www.loc.gov/ead/EAD3taglib/EAD3-TL-eng.html) ．]
に基づいて構築されている．`<fileDesc>`の記述はデジタル楽譜の記述として重要であるだけにとどまらず，電子ファイルとして構築された音楽情報を物理的な資料を扱ってきた図書館やアーカイブズといった既存の情報資源管理のスキームに乗せるためにも慎重に記述されるべきである．

一方で，先に挙げた雅楽情報記述の四領域モデルのうち，ファクシミリ領域や時系列メディア領域といった，デジタル雅楽譜の外部に存在する情報との関連性を記述するうえでは，`<EncodingDesc>`に関するより詳細な情報記述が求められる．本研究におけるデジタル雅楽譜の場合，半構造化譜字ユニットの記述は既存の楽譜を参照して行われるため，典拠として用いた楽譜の所在や参照した楽譜の特定に関する情報は`<EncodingDesc>`に記述されるべきである．

また，上記リストの最後に挙げられている`<manifestationList>`は抽象的でわかりにくい記述の説明になっているが，これはFRBRモデルにおけるManifestation（体現形）に関するメタデータ記述環境を提供するために用意されている．
FRBRは国際図書館連盟が1997年に公表した書誌情報に関する概念モデルであり，図書館情報学の分野で広く用いられている．FRBRは，書誌情報をWork（著作），Expression（表現形），Manifestation（体現形），Item（個別資料）の4つのレベルに分類している．ある著作は表現形を通して実現され，表現型は体現形の中で具体化され，体現形は個別資料によって例示される，というように4つの水準における関係性が定義されており，これらのうち，具体的な実体を伴うのは個別資料のみで，他の3つは抽象的な概念である．したがって，実際にカタロギングを行う際に手元に存在するのは個別資料だけであり，アーキビストやカタロガーはそこから，著作，表現形，体現形に関する情報を記述している．

このように，MEIが提供するメタデータ記述領域を使用すると，デジタル楽譜に関わる様々なメタデータ記述に幅広く対応できる．デジタル雅楽譜の作成にあたって本研究が作成したスキーマでは，図\ref{fig:gagakuMeta}のようにメタデータを記述する`<gagakuMeta>`を設け，その内部に`<meiHead>`を配置している．
本研究が提供するスキーマではMEIが提供するスキーマを内部で直接呼び出しているため，MEIで記述可能なメタデータ記述の構造は全てそのまま利用することができる．MEIのメタデータ記述構造はTEIにもよく似た構造を持っているため，テキスト資料を対象に研究をしている利用者にとっても比較的参入しやすい環境が整備できる．

:::{#fig-012345 fig-cap="デジタル雅楽譜におけるメタデータの記述"}
```xml
<gagakuMeta>
  <meiHead> 
    % MEI ヘッダから移植された
    % メタデータ記述構造
  </meiHead>
  <gagakuHead>  % 雅楽譜独自のメタデータ
    <choshi>
      % 調子
    </choshi>
    <title>
      % 曲名
    </title>
    <sizeCategory>
      % 大曲，中曲，小曲の別を示す
    </sizeCategory>
    <hyoshi>
      % 拍子に関わる記述を示す
    </hyoshi>
    <kuwaeHyoshi>
      % 加拍子に関わる記述を示す
    </kuwaeHyoshi>
    <kodo>
      % 後度の記述を示す
    </kodo>
  </gagakuHead>
</gagakuMeta>
```
:::

#### 雅楽譜独自のメタデータに関する記述 {.unnumbered}

楽譜本体の記述に先立つ題字や拍子，加拍子等の記述をマークアップするための要素として，`<front>`を設けていることは先に指摘したが，これらの要素も雅楽作品に関する重要なメタデータである．しかし，拍子や加拍子といった雅楽に独特な音楽概念はMEIが提供する`meiHead`の内部に適切な記述領域が用意されていない．
作品のタイトル，調，拍子の記述に対応するタグとしては，`<meiHead>`の内部で提供される`<title>`，`<key>`，`<meter>`などが挙げられる．しかし，西洋音楽の文脈をベースとして構築されているMEIが定義するこれらのタグが持つ概念は雅楽におけるタイトル，調子，拍子とは大きく異なっている．したがって，MEIの定義をそのまま雅楽譜に関連する情報の記述に用いてしまうと，MEIが定義するタグの意味を恣意的に読み替えることになってしまう．データの整合性を維持する上で，このようなタグが本来持つ概念とマークアップの対象との関係性を恣意的に解釈することは避けなければならない．

また，各楽曲が持つ情報は楽譜上に表れるものだけではない．例えば，各楽曲は特定の調子に分類されているが，調子は各楽曲の冒頭に現れない．実物の雅楽譜は，調子ごとにで冊子が分かれていることもあれば，六調子が1冊にまとめられていることもあり，後者の場合には各調子の冒頭に目次が挿入される構造をとっている．したがって，各楽曲がどの調子に該当するかを特定するためには，その楽譜が収録されている譜本の題簽を確認するか，その譜の前に挿入されている目次がどの調子のものかを確認する必要がある．このように，楽譜上には直接表れない要素の中にも，その楽曲の属性を示すものが存在する．

そこで，本研究が提供するスキーマでは雅楽に独特なメタデータ記述を実現するため，@fig-012345 に示すように`<gagakuMeta>`の内部に，`<gagakuHead>`を用意している．ここには，`<front>`で記述された情報に加え，調子など，楽譜上には直接現れない情報を記述するための要素を設けた．本研究では`<front>`の記述に対して`<choshi>`を加えるにとどまったが，必要に応じてスキーマを拡張することで`<gagakuHead>`として記述すべき内容を充実させることができる．

## GagakuXMLを使用した譜字に関する分析

ここまで検討してきたGagakuXMLにおける半構造化譜字ユニットとメタデータに関する記述は，雅楽情報を統合的に扱う上で1つの軸となる構造である．一方，その半構造化譜字ユニット自体も分析の対象となりうる．
本研究では唐楽中小曲譜の三管の譜を対象に93曲分，合計279件の楽譜を対象に半構造化譜字ユニットのマークアップを行っている．ここでは，その中から篳篥譜を対象として，そのデータが持つ情報に対してごく簡易的な分析を行い，調子の関係性や唱歌と譜字の関係について可視化の事例を示す．ここに示すグラフ類は，あくまでも本研究で使用したデータの可視化の一例であり，雅楽譜そのものの分析を目的としたものではないことに注意されたい．本データを用いて雅楽譜の分析に取り組むためには，可視化の結果を日本伝統音楽研究の文脈に即して解釈することが求められるが，そのようなより実践的な分析は今後の課題として残されている．

### 各調子における譜字の構成

まず，作成したデジタル雅楽譜の記述をもとに，各調子における唱歌と譜字を構成する譜字の割合を示したのが図\ref{fig:譜字割合_壱越調}から図\ref{fig:譜字割合_太食調}である．集計に際して，直前の唱歌を繰り返すことを示す``引''については，独立した譜字としてではなく，直前に現れる唱歌とみなしてカウントすることとした．また，譜字の譜字として用いられている``丅''および``丄''はグラフ描画時にレンダリングできなかったため，凡例ラベルの表示はそれぞれ``下''及び``上''の字を用いて置換している．

グラフの形状から，各調子によって唱歌と譜字の構成比率が異なることがわかる．例えば，平調，盤渉調，太食調においては唱歌の``ヲ''と``ア''の割合が他と比べて高く，譜字についても，``一''，``六''，``工''の割合が高いことが共通している．また，壱越調，黄鐘調については，唱歌での``イ''の割合が他の調に比べて高いことがわかる．





::: {#fig-elephants layout-ncol=2}

![`<shoga>`における各譜字の出現割合](img/output_shoga_graphs/壱越調.png){#fig-Ichi_shoga .lightbox}

![`<fuji>`における各譜字の出現割合](img/output_tetsuke_graphs/壱越調.png){#fig-Ichi_fuji .lightbox}

唐楽中小曲篳篥譜における`<shoga>`及び`<fuji>`の構成割合（壱越調）

:::

::: {#fig-elephants layout-ncol=2}

![`<shoga>`における各譜字の出現割合](img/output_shoga_graphs/平調.png){#fig-Ichi_shoga .lightbox}

![`<fuji>`における各譜字の出現割合](img/output_tetsuke_graphs/平調.png){#fig-Ichi_fuji .lightbox}

唐楽中小曲篳篥譜における`<shoga>`及び`<fuji>`の構成割合（平調）

:::

::: {#fig-elephants layout-ncol=2}

![`<shoga>`における各譜字の出現割合](img/output_shoga_graphs/双調.png){#fig-Ichi_shoga .lightbox}

![`<fuji>`における各譜字の出現割合](img/output_tetsuke_graphs/双調.png){#fig-Ichi_fuji .lightbox}

唐楽中小曲篳篥譜における`<shoga>`及び`<fuji>`の構成割合（双調）

:::

::: {#fig-elephants layout-ncol=2}

![`<shoga>`における各譜字の出現割合](img/output_shoga_graphs/黄鐘調.png){#fig-Ichi_shoga .lightbox}

![`<fuji>`における各譜字の出現割合](img/output_tetsuke_graphs/黄鐘調.png){#fig-Ichi_fuji .lightbox}

唐楽中小曲篳篥譜における`<shoga>`及び`<fuji>`の構成割合（黄鐘調）

:::

::: {#fig-elephants layout-ncol=2}

![`<shoga>`における各譜字の出現割合](img/output_shoga_graphs/盤渉調.png){#fig-Ichi_shoga .lightbox}

![`<fuji>`における各譜字の出現割合](img/output_tetsuke_graphs/盤渉調.png){#fig-Ichi_fuji .lightbox}

唐楽中小曲篳篥譜における`<shoga>`及び`<fuji>`の構成割合（盤渉調）

:::

::: {#fig-elephants layout-ncol=2}

![`<shoga>`における各譜字の出現割合](img/output_shoga_graphs/太食調.png){#fig-Ichi_shoga .lightbox}

![`<fuji>`における各譜字の出現割合](img/output_tetsuke_graphs/太食調.png){#fig-Ichi_fuji .lightbox}

唐楽中小曲篳篥譜における`<shoga>`及び`<fuji>`の構成割合（太食調）

:::





:::{#tbl-12300 tbl-cap="各調子における唱歌の出現回数"}

<style>

.table_component {
  overflow-x: auto;
  margin: 1rem 0;
}

/* 固定レイアウトで等幅配置を安定させる */
.table_component table {
  width: 100%;
  table-layout: fixed;
  border-collapse: collapse;
  /* border: 1px solid #ccc; */
  font-family: "Noto Sans JP", sans-serif;
  font-size: 14px;
}

/* 見出し列（左端） */
.table_component .bold {
  width: 100px;
  font-weight: bold;
  text-align: left;
  /* background: #f5f5f5; */
  white-space: nowrap;
}

/* ヘッダ行 */
.table_component thead td {
  /* background: #e0e0e0; */
  font-weight: bold;
  text-align: center;
  white-space: nowrap; 
    width: 60px;
            border-bottom: 3px double #333;
    
}

/* データセル */
.table_component td {
  text-align: center;
  padding: 6px;
  /* border: 1px solid #ccc; */
  word-wrap: break-word;
  overflow-wrap: break-word;
  
}

/* アルファベット列（ア、イ、ウ…）を等幅に */
.table_component thead td:not(.bold),
.table_component tbody td:not(.bold) {
  min-width: 50px;
}

/* 交互に背景色をつけて見やすくする */
.table_component tbody tr:nth-child(even) {
  background: #fafafa;
}



</style>
<div class="table_component" style="overflow-x: auto;">
  <table>
    <thead>
      <tr class="header">
        <td class="bold">唱歌</td>
        <td>ア</td>
        <td>イ</td>
        <td>ウ</td>
        <td>オ</td>
        <td>タ</td>
        <td>チ</td>
        <td>ツ</td>
        <td>テ</td>
        <td>ト</td>
        <td>ハ</td>
        <td>ヒ</td>
        <td>フ</td>
        <td>ホ</td>
        <td>ヤ</td>
        <td>ラ</td>
        <td>リ</td>
        <td>ル</td>
        <td>レ</td>
        <td>ロ</td>
        <td>ヱ</td>
        <td>ヲ</td>
      </tr>
    </thead>
    <tr>
      <td class="bold">壱越調</td>
      <td>420</td>
      <td>886</td>
      <td>3</td>
      <td>0</td>
      <td>182</td>
      <td>253</td>
      <td>0</td>
      <td>53</td>
      <td>126</td>
      <td>88</td>
      <td>178</td>
      <td>1</td>
      <td>96</td>
      <td>3</td>
      <td>411</td>
      <td>331</td>
      <td>314</td>
      <td>139</td>
      <td>337</td>
      <td>117</td>
      <td>340</td>
    </tr>
    <tr>
      <td class="bold">平調</td>
      <td>840</td>
      <td>349</td>
      <td>13</td>
      <td>1</td>
      <td>256</td>
      <td>69</td>
      <td>4</td>
      <td>128</td>
      <td>139</td>
      <td>151</td>
      <td>82</td>
      <td>1</td>
      <td>130</td>
      <td>83</td>
      <td>370</td>
      <td>352</td>
      <td>231</td>
      <td>230</td>
      <td>285</td>
      <td>355</td>
      <td>786</td>
    </tr>
    <tr>
      <td class="bold">双調</td>
      <td>307</td>
      <td>467</td>
      <td>51</td>
      <td>4</td>
      <td>143</td>
      <td>101</td>
      <td>23</td>
      <td>101</td>
      <td>148</td>
      <td>72</td>
      <td>109</td>
      <td>1</td>
      <td>118</td>
      <td>1</td>
      <td>322</td>
      <td>210</td>
      <td>335</td>
      <td>107</td>
      <td>393</td>
      <td>388</td>
      <td>392</td>
    </tr>
    <tr>
      <td class="bold">黄鐘調</td>
      <td>301</td>
      <td>524</td>
      <td>7</td>
      <td>0</td>
      <td>98</td>
      <td>115</td>
      <td>2</td>
      <td>65</td>
      <td>106</td>
      <td>64</td>
      <td>84</td>
      <td>0</td>
      <td>66</td>
      <td>13</td>
      <td>173</td>
      <td>218</td>
      <td>219</td>
      <td>178</td>
      <td>232</td>
      <td>187</td>
      <td>357</td>
    </tr>
    <tr>
      <td class="bold">盤渉調</td>
      <td>821</td>
      <td>371</td>
      <td>47</td>
      <td>0</td>
      <td>224</td>
      <td>71</td>
      <td>0</td>
      <td>139</td>
      <td>150</td>
      <td>97</td>
      <td>62</td>
      <td>0</td>
      <td>117</td>
      <td>127</td>
      <td>303</td>
      <td>256</td>
      <td>272</td>
      <td>175</td>
      <td>220</td>
      <td>313</td>
      <td>780</td>
    </tr>
    <tr>
      <td class="bold">太食調</td>
      <td>535</td>
      <td>273</td>
      <td>0</td>
      <td>0</td>
      <td>144</td>
      <td>60</td>
      <td>0</td>
      <td>88</td>
      <td>92</td>
      <td>92</td>
      <td>64</td>
      <td>0</td>
      <td>101</td>
      <td>83</td>
      <td>236</td>
      <td>253</td>
      <td>175</td>
      <td>123</td>
      <td>164</td>
      <td>188</td>
      <td>589</td>
    </tr>
  </table>
</div>

:::


:::{#tbl-37843 tbl-cap="各調子における譜字の出現回数"}
<style>

.table_component {
  overflow-x: auto;
  margin: 1rem 0;
}

/* 固定レイアウトで等幅配置を安定させる */
.table_component table {
  width: 100%;
  table-layout: fixed;
  border-collapse: collapse;
  font-family: "Noto Sans JP", sans-serif;
  font-size: 14px;
}

/* 見出し列（左端） */
.table_component .bold {
  width: 60px;
  font-weight: bold;
  text-align: left;
  /* background: #f5f5f5; */
  white-space: nowrap;
}

/* ヘッダ行 */
.table_component thead td {
  /* background: #e0e0e0; */
  font-weight: bold;
  text-align: center;
  white-space: nowrap; 
    width: 50px;
            border-bottom: 3px double #333;
    
}

/* データセル */
.table_component td {
  text-align: center;
  padding: 6px;
  /* border: 1px solid #ccc; */
  word-wrap: break-word;
  overflow-wrap: break-word;
  
}

/* アルファベット列（ア、イ、ウ…）を等幅に */
.table_component thead td:not(.bold),
.table_component tbody td:not(.bold) {
  min-width: 60px;
}

/* 交互に背景色をつけて見やすくする */
.table_component tbody tr:nth-child(even) {
  background: #fafafa;
}



</style>
<div class="table_component" style="overflow-x: auto;">
<table>
<thead><tr><td class="bold">譜字</td>  <td>舌</td>  <td>五</td>   <td>工</td>   <td>凢</td>   <td>六</td>   <td>四</td>   <td>一</td>   <td>上</td>   <td>下</td></tr></thead>
<tr><td class="bold">壱越調</td> <td>0</td>  <td>69</td>  <td>312</td> <td>155</td> <td>373</td> <td>282</td> <td>474</td> <td>170</td> <td>219</td></tr>
<tr><td class="bold">平調</td>  <td>38</td> <td>99</td>  <td>334</td> <td>85</td>  <td>358</td> <td>300</td> <td>399</td> <td>370</td> <td>138</td></tr>
<tr><td class="bold">双調</td>  <td>24</td> <td>196</td> <td>406</td> <td>145</td> <td>354</td> <td>270</td> <td>237</td> <td>209</td> <td>45</td></tr>
<tr><td class="bold">黄鐘調</td> <td>7</td>  <td>24</td>  <td>185</td> <td>213</td> <td>158</td> <td>190</td> <td>154</td> <td>259</td> <td>225</td></tr>
<tr><td class="bold">盤渉調</td> <td>1</td>  <td>107</td> <td>332</td> <td>135</td> <td>396</td> <td>180</td> <td>391</td> <td>88</td>  <td>263</td></tr>
<tr><td class="bold">太食調</td> <td>19</td> <td>41</td>  <td>179</td> <td>87</td>  <td>268</td> <td>192</td> <td>266</td> <td>204</td> <td>152</td></tr>
</table>
</div>

:::






また，譜字の出現回数に基づいた各調子のコサイン類似度を示したのが図\ref{fig:ヒートマップ1}のヒートマップである．唱歌を構成する譜字については先に指摘した通り，平調--盤渉調--太食調の間に出現傾向の類似性が確認できる．一方，譜字については，壱越調--平調--盤渉調--太食調のに譜字出現傾向の類似性が認められる一方，黄鐘調--双調及び黄鐘調--盤渉調の組み合わせは全ての組み合わせの中で最も類似度が低い組み合わせであることが数値として示されている．


::: {#fig-heatmap layout-ncol="2" fig-cap=""}

![唱歌の出現回数に基づく各調子の相関](img/graph/ヒートマップ唱歌2.png){#fig-heatmapshoga .lightbox}

![譜字の出現回数に基づく各調子の相関](img/graph/ヒートマップ手付2.png){#fig-heatmapfuji .lightbox}


譜字及び唱歌を構成する譜字の出現回数に基づく各調子の相関

:::


#### 唱歌に対する譜字の組み合わせ頻度 {.unnumbered}

セルの内部に生じる唱歌と譜字の組み合わせを抽出し，唱歌の譜字に対してどの譜字が付与される傾向があるかを示したのが図\ref{fig:ヒートマップ2}である．上記の分析同様，``引''については直前の唱歌として扱い，``丅''および``丄''はそれぞれ``下''と``上''に置換して凡例を示している．
また，唱歌と譜字の両方が1つの`<cell>`に含まれているもののみを抽出しているため，唱歌単独でセルを形成する譜字はこの分析には含まれていない．

`<cell>`の内部で譜字と対応関係を形成する唱歌は11種類あるが，唱歌ごとに対しやすい譜字に偏りが見て取れる．唱歌1つに対して平均2.82文字の譜字が対応しうるが，中には``ヤ''のように，1つの譜字としか対応しない唱歌や，逆に``ル''のように7つの譜字と対応しうる唱歌も存在する．また，共通した母音を持つ唱歌の一部（``タ''と``ラ''，``チ''と``リ''，``テ''と``レ''，``ト''と``ロ''）については，子音が異なる場合であっても，対応する譜字が概ね共通していることも確認できる．

雅楽における唱歌の役割としては，稽古で繰り返し歌うことで``旋律''を覚えるという伝承習慣と関連付けて語られることが多いが，唱歌と譜字との対応関係に偏りがあることを考えると，その一部は口三味線^[三味線の旋律を唱えて覚える唱歌の一形態．雅楽の唱歌と異なり，チン，トン，シャン，チャン，ツン，テンなどと擬音化された旋律が奏法と対応しており，旋律を唱えると同時に奏法を覚えることもできる．笙の合竹は唱歌と奏法（譜字）が統合されており，口三味線と類似した構造を持っているといえる．]
のように，楽器の演奏方法に関連する情報が間接的に織り込まれていることが示唆される．従来，このような唱歌と譜字の緩やかな関連性は，稽古の中で無意識的に習得されてきたと考えられるが，それをこのようにデータとして可視化することで，雅楽の演奏伝承や演奏の習得における知識の伝達のあり方についての新たな視点を提供することができる．

![各唱歌に対する譜字の頻度](img/graph/唱歌手付ヒートマップ3.png){.lightbox}

ここで取り上げた分析はいずれも楽譜を構成する譜字の出現回数を数え上げるという，極めて単純なものではあるが，唐楽中小曲における篳篥譜を構成する93件の楽曲を対象とし，譜字にして唱歌26,854字，譜字10,849字という数を人力で数え上げることは現実的とは言い難いだろう．このような処理が機械的に実施できる環境がもたらされたことは，雅楽譜が持つ構造や特徴を理解する上で大きな進展といえるだろう．
また，管見の限り雅楽譜に含まれる譜字を対象として，このようなデータを公開しているのは，本研究による取り組みが初めてである．

今回半構造化譜字ユニットの記述を用いて行った分析は，翻刻された楽譜の記述そのものを対象としているが，ここに実際の演奏や雅楽に関連した知識などが加わることで，より深い分析が可能となる可能性がある．データの分析から得られる何らかの傾向や特徴を説明するためには，データそのものに対する解釈はもちろんのこと，そのデータが持つ情報と外部の情報との関連性を考慮することが重要である．譜字のデータから得られる特徴の持つ意味を明らかにするためには，雅楽情報の四領域モデルに基づいたデータのさらなる拡張や連携，さらには雅楽を実践する立場だからこそ得られる知見を取り入れることが求められる．また，データの傾向を説明するのではなく，データの持つ傾向がすでに何かを説明しているという可能性もある．このように，データの解釈を目指す視点と，データそのものが何を説明しうるかという視点の2つの側面を行き来することで，データの持つ意味や価値はさらに高まると考えられる．

## 雅楽情報のネットワーク化に向けた展望

\ref{cha:楽譜の機械可読化}章で示したように，GagakuXMLは雅楽関連情報の接続によって，雅楽に関わる多様な情報を統合的に扱うための基盤となることを想定している．本研究が提供するGagakuXMLにおける半構造化譜字ユニットとメタデータに関する記述は，それ自体が分析の対象となりうると同時に，雅楽情報を統合的に扱う上で1つの基礎となる構造でもある．

雅楽情報が相互に繋がったネットワークを構成することによって，雅楽に関する複数の資料，情報，記録が統合され，雅楽をより多面的に理解可能なメディア環境がもたらされることが期待できる．そのようなメディア環境は，音楽研究の観点からだけでなく，雅楽の普及や継承にも貢献しうるものである．本研究が構築したスキーマは雅楽譜の記述をベースとする譜字の構造化までにとどまっており，GagakuXMLを用いた雅楽情報ネットワークの構築に向けた具体的なマークアップの方法論については検討していないが，本研究が提供する半構造化譜字ユニットの拡張可能性として以下にその展望を示す．

### 雅楽譜画像との接続


第 @sec-MachineReadableSheetMusic 章で示したように，本研究が提示する雅楽情報記述モデルの半構造化譜字ユニットは既存の雅楽譜を典拠として構築されることを想定している．そのため，典拠とした雅楽譜の版面画像との接続は，半構造化譜字ユニットの記述内容に関する事後検証可能性を高め，翻刻に対する信頼性を向上させるために，GagakuXMLを用いた雅楽情報ネットワークの構築において最初に検討されるべき課題である．


#### IIIFを用いた典拠資料との接続 {.unnumbered}

IIIFはデジタルアーカイブなどに収録された画像へのアクセスを標準化し，相互運用を容易にすることを目的とするオープン標準であり，画像の表示，検索，注釈付けなどの機能を提供する複数のAPIを提供している．本研究で用いた宮内庁書陵部が所蔵する『雅樂譜』と東京藝術大学附属図書館が所蔵する『明治撰定譜』はどちらもIIIFに対応しており，これらの画像資料とGagakuXMLを組み合わせることで，画像資料と機械可読データとの間で相互参照が実現できる．

![IIIF Curation Viewerを用いたアノテーションの例^[アノテーションを付与した楽譜は以下のリンクからアクセス可能．
[http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?curation=https://mp.ex.nii.ac.jp/api/curation/json/a7149f99-9cac-4249-9e63-8d8293e644cf&mode=annotation&lang=ja](http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?curation=https://mp.ex.nii.ac.jp/api/curation/json/a7149f99-9cac-4249-9e63-8d8293e644cf&mode=annotation&lang=ja)]](img/anotation.png){#fig-IIIF}



@fig-IIIF は，人文学オープンデータ共同利用センターが提供しているIIIF Curation Viewer  ^[人文学オープンデータ共同利用センター，「IIIF Curation Viewer」，[http://codh.rois.ac.jp/software/iiif-curation-viewer/](http://codh.rois.ac.jp/software/iiif-curation-viewer/)(閲覧：2024-10-31)]
を用いたアノテーションの例である．この例が示すように，IIIFを使用することで画像資料の特定の領域に対してアノテーションを付与することができ，行，セル，譜字といった任意の水準で画像領域と半構造化譜字ユニットを結びつけることが出来る．デジタル画像として公開されている古典籍とその構造化テキストの関係においては，既にTEIとIIIFを利用したデジタル源氏物語^[デジタル源氏物語，[https://genji.dl.itc.u-tokyo.ac.jp/](https://genji.dl.itc.u-tokyo.ac.jp/)（2024-11-05取得）]
など，先行する事例が存在している．これらの事例を参考にしつつ，半構造化譜字ユニットの内容とIIIFを組み合わせることで，雅楽譜の画像と機械可読データとの間の相互参照が実現できる．

### 五線譜版雅楽譜との接続

第 [-@sec-notationasarecord] 章でも触れた通り，雅楽においては五線譜版雅楽譜の作成が過去に複数回試みられており，特に芝[-@芝1968]による『五線譜による雅楽総譜』によって，明治撰定譜に収録されたすべての楽曲に五線譜版が存在する状態が実現されている．このような五線譜として記述された雅楽譜は，オリジナルの雅楽譜に含まれない，五線譜版特有の情報を持っている可能性がある．また，伝統的な雅楽譜の記述が口伝による伝承を基盤としており，楽譜の記述のみから旋律に関する情報を得ることが難しい一方で，それに対応する五線譜が存在すれば，雅楽譜の記述とその大まかな旋律の関係性をより多くの人が理解しやすくなる可能性がある．

#### MEIを用いた五線譜版雅楽譜のマークアップ {.unnumbered}

五線譜で記述された雅楽資料とGagakuXMLを関連付けるうえでは，五線譜を軸に展開された既存の枠組みを十分に活用することで，より低コストかつ効率的なデータの統合が可能となるだろう．
とくに，データ記述モデルとして比較的近い構造を持つMEIを用いることで，五線譜版雅楽譜に関する情報の豊かな記述と，GagakuXMLとの接続が容易に両立されることが見込まれる．MEIについては既にmei-friend
  ^[ウィーン国立音楽大学のプロジェクトが開発したMEIの編集支援ツール．ブラウザ上でレンダリングされたMEIを確認しながら編集作業が行える．（[https://mei-friend.mdw.ac.at/](https://mei-friend.mdw.ac.at/)）]やVerovio
    ^[MEIをレンダリングしてSVGを出力するライブラリ．マルチプラットフォームに対応したオープンソースライブラリとして，RISM Digital Centerが開発を展開しており，DIME，Beethovens Werkstatt，SIMSSAなど，40以上のプロジェクトおよび機関に採用されている．([https://www.verovio.org/](https://www.verovio.org/))]など，マークアップやレンダリングのツールが複数開発されており，五線譜版雅楽譜のデジタル化においてもこれらのツールを活用することで，データの利用性を向上させることが期待できる．

## 小結

本章では雅楽情報記述モデルをXMLを用いた具体的なデータ記述へと落とし込み，その基本的な要素である半構造化譜字ユニットとメタデータに関する記述について，スキーマを構築するとともに，唐楽中小曲に含まれる三管の譜を対象とした楽譜のマークアップに取り組んだ．また，構築した半構造化譜字ユニットの記述を用いて，篳篥譜に含まれる譜字の構成に関する分析を行い，各調子における唱歌と譜字の構成比率や，唱歌に対する譜字の組み合わせ頻度についてグラフやヒートマップを用いた可視化を行った．
ここで示した情報記述モデルやGagakuXMLのスキーマは例外的な記述に対する対応や対応する記譜法の制限といった点において，依然として改善の余地は残されているが，雅楽譜の記述に関する情報を機械可読な形で提供するための基盤として今後さらに発展させて行くことで，楽譜というメディアに限らず雅楽を記録した多様なメディアを包括的に扱う情報記述の方法が確立され，新しい水準での知識の表現や共有が可能となることが期待される．そのプロトタイプとして，93曲，279件分のまとまったデータを公開したことは，今後の研究や実践において重要な意義を持つものと考えられる．




具体的な資料との接続方法についてはその目的に応じて都度検討する必要があるが，本研究が提供するスキーマは雅楽情報を統合的に扱う上での1つの基盤として，今後の研究や実践に活用されることが期待される．既に存在する資料のデジタル化が進むとともに，今後新しくもたらされる資料や情報はボーンデジタルであることが想定される．雅楽という文化自体が人間を中心として伝承されていく状況は今後も変わらない一方で，その周辺に存在する情報や記録のデジタル化は不可逆的なプロセスであり，博物館，文書館，図書館といった文化機関が所有する資料のデジタル化は今後も一層推進されていく状況にある．そのような状況の中で，本研究が提供する雅楽情報記述モデルと，それに基づいたGgakuXMLスキーマを用いた雅楽情報の接続はこれまで展開されてきた文化の記録，保存に関する取り組みに新たな展望をもたらすものである．

